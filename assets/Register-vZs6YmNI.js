import{j as e,r as t,C as S,F as u,b as U}from"./index-BUpNliCJ.js";import{c as k,i as r,E as F,P as V,a as C,b as I,r as q}from"./auth-DiZBnBMo.js";import{U as N,i as x}from"./UserIcon-DQ1oVvEI.js";const L=s=>e.jsxs("svg",{className:"h-8 w-8 text-gray-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...s,children:[" ",e.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})]});function B(){t.useEffect(()=>{document.title="Registro de Usuarios"},[]);const[s,f]=t.useState({username:"",email:"",password:"",confirmPassword:""}),[a,v]=t.useState({type:"success",text:""}),[p,P]=t.useState(!1),[b,M]=t.useState(!1),[g,h]=t.useState(!1),w=l=>l==="password"?P(!p):M(!b),c=t.useCallback(l=>{const{name:d,value:m}=l.target;f(R=>({...R,[d]:m}))},[]),{isUsernameInvalid:j,isEmailInvalid:i,isPasswordInvalid:n,isConfirmPasswordInvalid:o}=k(s),y=!s.username||!s.email||!s.password||!s.confirmPassword||r(s.username)||r(s.email)||r(s.password)||r(s.confirmPassword)||n||o||i||g,E=async l=>{l.preventDefault(),h(!0);try{await q(s),v({type:"success",text:"Usuario creado con éxito"}),f({username:"",email:"",password:"",confirmPassword:""})}catch(d){let m="Error desconocido";d instanceof Error&&(m=d.message),v({type:"error",text:m})}finally{h(!1)}};return e.jsx(S,{children:e.jsxs("form",{onSubmit:E,children:[e.jsx(u,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{width:33,height:33,className:"max-sm:mb-10 md:mb-5"}),e.jsx(x,{id:"username",name:"username",variant:"bordered",isRequired:!0,type:"text",label:"Nombre de Usuario",description:"Nombre con el que te verán los usuarios",value:s.username,onChange:c,isInvalid:r(s.username),errorMessage:r(s.username)?"Máximo 255 caracteres":"",color:j===void 0?void 0:j?"danger":"success"})]})}),e.jsx(u,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{width:33,height:33,className:"max-sm:mb-10 md:mb-5"}),e.jsx(x,{id:"email",name:"email",variant:"bordered",isRequired:!0,type:"email",label:"Correo Electrónico",description:"No se mostrará tu correo electrónico en tu perfil",value:s.email,onChange:c,isInvalid:i||r(s.email),errorMessage:i?"Ingresa un email válido":r(s.email)?"Máximo 255 caracteres":"",color:i===void 0?void 0:i?"danger":"success"})]})}),e.jsx(u,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{width:33,height:33,className:"max-sm:mb-14 md:mb-10"}),e.jsx(x,{name:"password",variant:"bordered",isRequired:!0,type:p?"text":"password",label:"Contraseña",description:"Mínimo 8 caracteres, una mayúscula, una minúscula, un número y un caracter especial",value:s.password,onChange:c,endContent:e.jsx("button",{tabIndex:-1,type:"button",onClick:()=>w("password"),"aria-label":"toggle password visibility",children:p?e.jsx(C,{className:"text-2xl text-default-400 pointer-events-none mb-2"}):e.jsx(I,{className:"text-2xl text-default-400 pointer-events-none mb-2"})}),isInvalid:r(s.password)||n,errorMessage:n?"Mínimo 8 caracteres, una mayúscula, una minúscula, un número y un caracter especial":r(s.password)?"Máximo 255 caracteres":"",color:n===void 0?void 0:n?"danger":"success"})]})}),e.jsx(u,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{width:33,height:33,className:"max-sm:mb-6 md:mb-6"}),e.jsx(x,{id:"confirmPassword",name:"confirmPassword",variant:"bordered",isRequired:!0,type:b?"text":"password",label:"Confirmar Contraseña",description:"Confirma tu contraseña",value:s.confirmPassword,onChange:c,endContent:e.jsx("button",{tabIndex:-1,type:"button",onClick:()=>w("confirmPassword"),"aria-label":"toggle confirm password visibility",children:b?e.jsx(C,{className:"text-2xl text-default-400 pointer-events-none mb-2"}):e.jsx(I,{className:"text-2xl text-default-400 pointer-events-none mb-2"})}),isInvalid:o,errorMessage:o?"Las contraseñas no coinciden":"",color:o===void 0?void 0:o?"danger":"success"})]})}),a!=null&&a.text&&a.type==="error"?e.jsx("p",{className:"text-red-500",children:a.text}):a!=null&&a.text&&a.type==="success"?e.jsx("p",{className:"text-green-500",children:a.text}):null," ",e.jsx("div",{className:"flex justify-end mt-5",children:e.jsx(U,{type:"submit","aria-label":"Register",className:"max-w-xs",color:y?"default":"success",disabled:y,isLoading:g,endContent:e.jsx(N,{}),children:"Crear Usuario"})})]})})}export{B as default};
