var tn=Object.defineProperty;var rn=(r,e,t)=>e in r?tn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var _t=(r,e,t)=>rn(r,typeof e!="symbol"?e+"":e,t);import{$ as yt,r as f,a as J,c as at,R as z,d as sn,e as Z,f as nn,g as vt,h as j,i as on,k as $e,l as xt,m as an,n as Se,o as kr,p as ln,t as Ae,q as Pr,v as cn,w as Nr,x as Tr,y as Mt,z as Ft,A as un,B as dn,j as d,D as wt,E as ae,G as H,H as lt,I as $t,J as fn,K as Oe,L as oe,M as jt,N as Ut,O as Wt,P as St,Q as Rr,S as hn,T as Kr,U as Ar,V as pn,W as Or,X as mn,Y as Lr,Z as zt,_ as bn,a0 as gn,a1 as yn,b as pe,a2 as vn,a3 as xn,a4 as wn,a5 as $n}from"./index-BUpNliCJ.js";import{$ as Sn,u as En,a as Ir,b as Cn,c as kn,U as Pn,i as Nn}from"./UserIcon-DQ1oVvEI.js";const Tn=Symbol.for("react-aria.i18n.locale"),Rn=Symbol.for("react-aria.i18n.strings");let ye;class Ve{getStringForLocale(e,t){let n=this.getStringsForLocale(t)[e];if(!n)throw new Error(`Could not find intl message ${e} in ${t} locale`);return n}getStringsForLocale(e){let t=this.strings[e];return t||(t=Kn(e,this.strings,this.defaultLocale),this.strings[e]=t),t}static getGlobalDictionaryForPackage(e){if(typeof window>"u")return null;let t=window[Tn];if(ye===void 0){let n=window[Rn];if(!n)return null;ye={};for(let o in n)ye[o]=new Ve({[t]:n[o]},t)}let s=ye==null?void 0:ye[e];if(!s)throw new Error(`Strings for package "${e}" were not included by LocalizedStringProvider. Please add it to the list passed to createLocalizedStringDictionary.`);return s}constructor(e,t="en-US"){this.strings=Object.fromEntries(Object.entries(e).filter(([,s])=>s)),this.defaultLocale=t}}function Kn(r,e,t="en-US"){if(e[r])return e[r];let s=An(r);if(e[s])return e[s];for(let n in e)if(n.startsWith(s+"-"))return e[n];return e[t]}function An(r){return Intl.Locale?new Intl.Locale(r).language:r.split("-")[0]}const Ht=new Map,Vt=new Map;class On{format(e,t){let s=this.strings.getStringForLocale(e,this.locale);return typeof s=="function"?s(t,this):s}plural(e,t,s="cardinal"){let n=t["="+e];if(n)return typeof n=="function"?n():n;let o=this.locale+":"+s,i=Ht.get(o);i||(i=new Intl.PluralRules(this.locale,{type:s}),Ht.set(o,i));let a=i.select(e);return n=t[a]||t.other,typeof n=="function"?n():n}number(e){let t=Vt.get(this.locale);return t||(t=new Intl.NumberFormat(this.locale),Vt.set(this.locale,t)),t.format(e)}select(e,t){let s=e[t]||e.other;return typeof s=="function"?s():s}constructor(e,t){this.locale=e,this.strings=t}}const qt=new WeakMap;function Ln(r){let e=qt.get(r);return e||(e=new Ve(r),qt.set(r,e)),e}function In(r,e){return e&&Ve.getGlobalDictionaryForPackage(e)||Ln(r)}function Bn(r,e){let{locale:t}=yt(),s=In(r,e);return f.useMemo(()=>new On(t,s),[t,s])}function Dn(...r){return r.length===1?r[0]:e=>{for(let t of r)typeof t=="function"?t(e):t!=null&&(t.current=e)}}function Ke(r,e){let t=window.getComputedStyle(r),s=/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY);return s&&e&&(s=r.scrollHeight!==r.clientHeight||r.scrollWidth!==r.clientWidth),s}function Br(r,e){let t=r;for(Ke(t,e)&&(t=t.parentElement);t&&!Ke(t,e);)t=t.parentElement;return t||document.scrollingElement||document.documentElement}function _n(r,e){const t=[];for(;r&&r!==document.documentElement;)Ke(r,e)&&t.push(r),r=r.parentElement;return t}let Mn=0;const Qe=new Map;function Fn(r){let[e,t]=f.useState();return J(()=>{if(!r)return;let s=Qe.get(r);if(s)t(s.element.id);else{let n=`react-aria-description-${Mn++}`;t(n);let o=document.createElement("div");o.id=n,o.style.display="none",o.textContent=r,document.body.appendChild(o),s={refCount:0,element:o},Qe.set(r,s)}return s.refCount++,()=>{s&&--s.refCount===0&&(s.element.remove(),Qe.delete(r))}},[r]),{"aria-describedby":r?e:void 0}}function jn(r,e,t,s){let n=at(t),o=t==null;f.useEffect(()=>{if(o||!r.current)return;let i=r.current;return i.addEventListener(e,n,s),()=>{i.removeEventListener(e,n,s)}},[r,e,s,o,n])}function Dr(r,e){let t=Yt(r,e,"left"),s=Yt(r,e,"top"),n=e.offsetWidth,o=e.offsetHeight,i=r.scrollLeft,a=r.scrollTop,{borderTopWidth:l,borderLeftWidth:c}=getComputedStyle(r),u=r.scrollLeft+parseInt(c,10),m=r.scrollTop+parseInt(l,10),h=u+r.clientWidth,p=m+r.clientHeight;t<=i?i=t-parseInt(c,10):t+n>h&&(i+=t+n-h),s<=m?a=s-parseInt(l,10):s+o>p&&(a+=s+o-p),r.scrollLeft=i,r.scrollTop=a}function Yt(r,e,t){const s=t==="left"?"offsetLeft":"offsetTop";let n=0;for(;e.offsetParent&&(n+=e[s],e.offsetParent!==r);){if(e.offsetParent.contains(r)){n-=r[s];break}e=e.offsetParent}return n}function Jt(r,e){if(document.contains(r)){let i=document.scrollingElement||document.documentElement;if(window.getComputedStyle(i).overflow==="hidden"){let l=_n(r);for(let c of l)Dr(c,r)}else{var t;let{left:l,top:c}=r.getBoundingClientRect();r==null||(t=r.scrollIntoView)===null||t===void 0||t.call(r,{block:"nearest"});let{left:u,top:m}=r.getBoundingClientRect();if(Math.abs(l-u)>1||Math.abs(c-m)>1){var s,n,o;e==null||(n=e.containingElement)===null||n===void 0||(s=n.scrollIntoView)===null||s===void 0||s.call(n,{block:"center",inline:"center"}),(o=r.scrollIntoView)===null||o===void 0||o.call(r,{block:"nearest"})}}}}let Ze=new Map;function Un(r){let{locale:e}=yt(),t=e+(r?Object.entries(r).sort((n,o)=>n[0]<o[0]?-1:1).join():"");if(Ze.has(t))return Ze.get(t);let s=new Intl.Collator(e,r);return Ze.set(t,s),s}function Wn({children:r}){let e=f.useMemo(()=>({register:()=>{}}),[]);return z.createElement(sn.Provider,{value:e},r)}function zn(r){let{ref:e,onInteractOutside:t,isDisabled:s,onInteractOutsideStart:n}=r,o=f.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}),i=at(l=>{t&&Le(l,e)&&(n&&n(l),o.current.isPointerDown=!0)}),a=at(l=>{t&&t(l)});f.useEffect(()=>{let l=o.current;if(s)return;const c=e.current,u=Z(c);if(typeof PointerEvent<"u"){let m=h=>{l.isPointerDown&&Le(h,e)&&a(h),l.isPointerDown=!1};return u.addEventListener("pointerdown",i,!0),u.addEventListener("pointerup",m,!0),()=>{u.removeEventListener("pointerdown",i,!0),u.removeEventListener("pointerup",m,!0)}}else{let m=p=>{l.ignoreEmulatedMouseEvents?l.ignoreEmulatedMouseEvents=!1:l.isPointerDown&&Le(p,e)&&a(p),l.isPointerDown=!1},h=p=>{l.ignoreEmulatedMouseEvents=!0,l.isPointerDown&&Le(p,e)&&a(p),l.isPointerDown=!1};return u.addEventListener("mousedown",i,!0),u.addEventListener("mouseup",m,!0),u.addEventListener("touchstart",i,!0),u.addEventListener("touchend",h,!0),()=>{u.removeEventListener("mousedown",i,!0),u.removeEventListener("mouseup",m,!0),u.removeEventListener("touchstart",i,!0),u.removeEventListener("touchend",h,!0)}}},[e,s,i,a])}function Le(r,e){if(r.button>0)return!1;if(r.target){const t=r.target.ownerDocument;if(!t||!t.documentElement.contains(r.target)||r.target.closest("[data-react-aria-top-layer]"))return!1}return e.current&&!e.current.contains(r.target)}const Hn=500;function Vn(r){let{isDisabled:e,onLongPressStart:t,onLongPressEnd:s,onLongPress:n,threshold:o=Hn,accessibilityDescription:i}=r;const a=f.useRef();let{addGlobalListener:l,removeGlobalListener:c}=nn(),{pressProps:u}=vt({isDisabled:e,onPressStart(h){if(h.continuePropagation(),(h.pointerType==="mouse"||h.pointerType==="touch")&&(t&&t({...h,type:"longpressstart"}),a.current=setTimeout(()=>{h.target.dispatchEvent(new PointerEvent("pointercancel",{bubbles:!0})),n&&n({...h,type:"longpress"}),a.current=void 0},o),h.pointerType==="touch")){let p=b=>{b.preventDefault()};l(h.target,"contextmenu",p,{once:!0}),l(window,"pointerup",()=>{setTimeout(()=>{c(h.target,"contextmenu",p)},30)},{once:!0})}},onPressEnd(h){a.current&&clearTimeout(a.current),s&&(h.pointerType==="mouse"||h.pointerType==="touch")&&s({...h,type:"longpressend"})}}),m=Fn(n&&!e?i:void 0);return{longPressProps:j(u,m)}}function qn(r){const e=on(r);if(!(r instanceof e.HTMLElement)&&!(r instanceof e.SVGElement))return!1;let{display:t,visibility:s}=r.style,n=t!=="none"&&s!=="hidden"&&s!=="collapse";if(n){const{getComputedStyle:o}=r.ownerDocument.defaultView;let{display:i,visibility:a}=o(r);n=i!=="none"&&a!=="hidden"&&a!=="collapse"}return n}function Yn(r,e){return!r.hasAttribute("hidden")&&!r.hasAttribute("data-react-aria-prevent-focus")&&(r.nodeName==="DETAILS"&&e&&e.nodeName!=="SUMMARY"?r.hasAttribute("open"):!0)}function _r(r,e){return r.nodeName!=="#comment"&&qn(r)&&Yn(r,e)&&(!r.parentElement||_r(r.parentElement,r))}const Gt=z.createContext(null);let I=null;function Jn(r){let{children:e,contain:t,restoreFocus:s,autoFocus:n}=r,o=f.useRef(null),i=f.useRef(null),a=f.useRef([]),{parentNode:l}=f.useContext(Gt)||{},c=f.useMemo(()=>new ct({scopeRef:a}),[a]);J(()=>{let h=l||F.root;if(F.getTreeNode(h.scopeRef)&&I&&!ze(I,h.scopeRef)){let p=F.getTreeNode(I);p&&(h=p)}h.addChild(c),F.addNode(c)},[c,l]),J(()=>{let h=F.getTreeNode(a);h&&(h.contain=!!t)},[t]),J(()=>{var h;let p=(h=o.current)===null||h===void 0?void 0:h.nextSibling,b=[];for(;p&&p!==i.current;)b.push(p),p=p.nextSibling;a.current=b},[e]),ro(a,s,t),Zn(a,t),no(a,s,t),to(a,n),f.useEffect(()=>{const h=Z(a.current?a.current[0]:void 0).activeElement;let p=null;if(V(h,a.current)){for(let b of F.traverse())b.scopeRef&&V(h,b.scopeRef.current)&&(p=b);p===F.getTreeNode(a)&&(I=p.scopeRef)}},[a]),J(()=>()=>{var h,p,b;let x=(b=(p=F.getTreeNode(a))===null||p===void 0||(h=p.parent)===null||h===void 0?void 0:h.scopeRef)!==null&&b!==void 0?b:null;(a===I||ze(a,I))&&(!x||F.getTreeNode(x))&&(I=x),F.removeTreeNode(a)},[a]);let u=f.useMemo(()=>Gn(a),[]),m=f.useMemo(()=>({focusManager:u,parentNode:c}),[c,u]);return z.createElement(Gt.Provider,{value:m},z.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:o}),e,z.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:i}))}function Gn(r){return{focusNext(e={}){let t=r.current,{from:s,tabbable:n,wrap:o,accept:i}=e,a=s||Z(t[0]).activeElement,l=t[0].previousElementSibling,c=ge(t),u=he(c,{tabbable:n,accept:i},t);u.currentNode=V(a,t)?a:l;let m=u.nextNode();return!m&&o&&(u.currentNode=l,m=u.nextNode()),m&&fe(m,!0),m},focusPrevious(e={}){let t=r.current,{from:s,tabbable:n,wrap:o,accept:i}=e,a=s||Z(t[0]).activeElement,l=t[t.length-1].nextElementSibling,c=ge(t),u=he(c,{tabbable:n,accept:i},t);u.currentNode=V(a,t)?a:l;let m=u.previousNode();return!m&&o&&(u.currentNode=l,m=u.previousNode()),m&&fe(m,!0),m},focusFirst(e={}){let t=r.current,{tabbable:s,accept:n}=e,o=ge(t),i=he(o,{tabbable:s,accept:n},t);i.currentNode=t[0].previousElementSibling;let a=i.nextNode();return a&&fe(a,!0),a},focusLast(e={}){let t=r.current,{tabbable:s,accept:n}=e,o=ge(t),i=he(o,{tabbable:s,accept:n},t);i.currentNode=t[t.length-1].nextElementSibling;let a=i.previousNode();return a&&fe(a,!0),a}}}const Et=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]"],Xn=Et.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";Et.push('[tabindex]:not([tabindex="-1"]):not([disabled])');const Qn=Et.join(':not([hidden]):not([tabindex="-1"]),');function ge(r){return r[0].parentElement}function Te(r){let e=F.getTreeNode(I);for(;e&&e.scopeRef!==r;){if(e.contain)return!1;e=e.parent}return!0}function Zn(r,e){let t=f.useRef(),s=f.useRef();J(()=>{let n=r.current;if(!e){s.current&&(cancelAnimationFrame(s.current),s.current=void 0);return}const o=Z(n?n[0]:void 0);let i=c=>{if(c.key!=="Tab"||c.altKey||c.ctrlKey||c.metaKey||!Te(r)||c.isComposing)return;let u=o.activeElement,m=r.current;if(!m||!V(u,m))return;let h=ge(m),p=he(h,{tabbable:!0},m);if(!u)return;p.currentNode=u;let b=c.shiftKey?p.previousNode():p.nextNode();b||(p.currentNode=c.shiftKey?m[m.length-1].nextElementSibling:m[0].previousElementSibling,b=c.shiftKey?p.previousNode():p.nextNode()),c.preventDefault(),b&&fe(b,!0)},a=c=>{(!I||ze(I,r))&&V(c.target,r.current)?(I=r,t.current=c.target):Te(r)&&!We(c.target,r)?t.current?t.current.focus():I&&I.current&&He(I.current):Te(r)&&(t.current=c.target)},l=c=>{s.current&&cancelAnimationFrame(s.current),s.current=requestAnimationFrame(()=>{if(o.activeElement&&Te(r)&&!We(o.activeElement,r))if(I=r,o.body.contains(c.target)){var u;t.current=c.target,(u=t.current)===null||u===void 0||u.focus()}else I.current&&He(I.current)})};return o.addEventListener("keydown",i,!1),o.addEventListener("focusin",a,!1),n==null||n.forEach(c=>c.addEventListener("focusin",a,!1)),n==null||n.forEach(c=>c.addEventListener("focusout",l,!1)),()=>{o.removeEventListener("keydown",i,!1),o.removeEventListener("focusin",a,!1),n==null||n.forEach(c=>c.removeEventListener("focusin",a,!1)),n==null||n.forEach(c=>c.removeEventListener("focusout",l,!1))}},[r,e]),J(()=>()=>{s.current&&cancelAnimationFrame(s.current)},[s])}function Mr(r){return We(r)}function V(r,e){return!r||!e?!1:e.some(t=>t.contains(r))}function We(r,e=null){if(r instanceof Element&&r.closest("[data-react-aria-top-layer]"))return!0;for(let{scopeRef:t}of F.traverse(F.getTreeNode(e)))if(t&&V(r,t.current))return!0;return!1}function eo(r){return We(r,I)}function ze(r,e){var t;let s=(t=F.getTreeNode(e))===null||t===void 0?void 0:t.parent;for(;s;){if(s.scopeRef===r)return!0;s=s.parent}return!1}function fe(r,e=!1){if(r!=null&&!e)try{$e(r)}catch{}else if(r!=null)try{r.focus()}catch{}}function He(r,e=!0){let t=r[0].previousElementSibling,s=ge(r),n=he(s,{tabbable:e},r);n.currentNode=t;let o=n.nextNode();e&&!o&&(s=ge(r),n=he(s,{tabbable:!1},r),n.currentNode=t,o=n.nextNode()),fe(o)}function to(r,e){const t=z.useRef(e);f.useEffect(()=>{if(t.current){I=r;const s=Z(r.current?r.current[0]:void 0);!V(s.activeElement,I.current)&&r.current&&He(r.current)}t.current=!1},[r])}function ro(r,e,t){J(()=>{if(e||t)return;let s=r.current;const n=Z(s?s[0]:void 0);let o=i=>{let a=i.target;V(a,r.current)?I=r:Mr(a)||(I=null)};return n.addEventListener("focusin",o,!1),s==null||s.forEach(i=>i.addEventListener("focusin",o,!1)),()=>{n.removeEventListener("focusin",o,!1),s==null||s.forEach(i=>i.removeEventListener("focusin",o,!1))}},[r,e,t])}function so(r){let e=F.getTreeNode(I);for(;e&&e.scopeRef!==r;){if(e.nodeToRestore)return!1;e=e.parent}return(e==null?void 0:e.scopeRef)===r}function no(r,e,t){const s=f.useRef(typeof document<"u"?Z(r.current?r.current[0]:void 0).activeElement:null);J(()=>{let n=r.current;const o=Z(n?n[0]:void 0);if(!e||t)return;let i=()=>{(!I||ze(I,r))&&V(o.activeElement,r.current)&&(I=r)};return o.addEventListener("focusin",i,!1),n==null||n.forEach(a=>a.addEventListener("focusin",i,!1)),()=>{o.removeEventListener("focusin",i,!1),n==null||n.forEach(a=>a.removeEventListener("focusin",i,!1))}},[r,t]),J(()=>{const n=Z(r.current?r.current[0]:void 0);if(!e)return;let o=i=>{if(i.key!=="Tab"||i.altKey||i.ctrlKey||i.metaKey||!Te(r)||i.isComposing)return;let a=n.activeElement;if(!V(a,r.current))return;let l=F.getTreeNode(r);if(!l)return;let c=l.nodeToRestore,u=he(n.body,{tabbable:!0});u.currentNode=a;let m=i.shiftKey?u.previousNode():u.nextNode();if((!c||!n.body.contains(c)||c===n.body)&&(c=void 0,l.nodeToRestore=void 0),(!m||!V(m,r.current))&&c){u.currentNode=c;do m=i.shiftKey?u.previousNode():u.nextNode();while(V(m,r.current));i.preventDefault(),i.stopPropagation(),m?fe(m,!0):Mr(c)?fe(c,!0):a.blur()}};return t||n.addEventListener("keydown",o,!0),()=>{t||n.removeEventListener("keydown",o,!0)}},[r,e,t]),J(()=>{const n=Z(r.current?r.current[0]:void 0);if(!e)return;let o=F.getTreeNode(r);if(o){var i;return o.nodeToRestore=(i=s.current)!==null&&i!==void 0?i:void 0,()=>{let a=F.getTreeNode(r);if(!a)return;let l=a.nodeToRestore;if(e&&l&&(V(n.activeElement,r.current)||n.activeElement===n.body&&so(r))){let c=F.clone();requestAnimationFrame(()=>{if(n.activeElement===n.body){let u=c.getTreeNode(r);for(;u;){if(u.nodeToRestore&&u.nodeToRestore.isConnected){fe(u.nodeToRestore);return}u=u.parent}for(u=c.getTreeNode(r);u;){if(u.scopeRef&&u.scopeRef.current&&F.getTreeNode(u.scopeRef)){He(u.scopeRef.current,!0);return}u=u.parent}}})}}}},[r,e])}function he(r,e,t){let s=e!=null&&e.tabbable?Qn:Xn,n=Z(r).createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode(o){var i;return!(e==null||(i=e.from)===null||i===void 0)&&i.contains(o)?NodeFilter.FILTER_REJECT:o.matches(s)&&_r(o)&&(!t||V(o,t))&&(!(e!=null&&e.accept)||e.accept(o))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return e!=null&&e.from&&(n.currentNode=e.from),n}class Ct{get size(){return this.fastMap.size}getTreeNode(e){return this.fastMap.get(e)}addTreeNode(e,t,s){let n=this.fastMap.get(t??null);if(!n)return;let o=new ct({scopeRef:e});n.addChild(o),o.parent=n,this.fastMap.set(e,o),s&&(o.nodeToRestore=s)}addNode(e){this.fastMap.set(e.scopeRef,e)}removeTreeNode(e){if(e===null)return;let t=this.fastMap.get(e);if(!t)return;let s=t.parent;for(let o of this.traverse())o!==t&&t.nodeToRestore&&o.nodeToRestore&&t.scopeRef&&t.scopeRef.current&&V(o.nodeToRestore,t.scopeRef.current)&&(o.nodeToRestore=t.nodeToRestore);let n=t.children;s&&(s.removeChild(t),n.size>0&&n.forEach(o=>s&&s.addChild(o))),this.fastMap.delete(t.scopeRef)}*traverse(e=this.root){if(e.scopeRef!=null&&(yield e),e.children.size>0)for(let t of e.children)yield*this.traverse(t)}clone(){var e;let t=new Ct;var s;for(let n of this.traverse())t.addTreeNode(n.scopeRef,(s=(e=n.parent)===null||e===void 0?void 0:e.scopeRef)!==null&&s!==void 0?s:null,n.nodeToRestore);return t}constructor(){this.fastMap=new Map,this.root=new ct({scopeRef:null}),this.fastMap.set(null,this.root)}}class ct{addChild(e){this.children.add(e),e.parent=this}removeChild(e){this.children.delete(e),e.parent=void 0}constructor(e){this.children=new Set,this.contain=!1,this.scopeRef=e.scopeRef}}let F=new Ct;const ue=[];function oo(r,e){let{onClose:t,shouldCloseOnBlur:s,isOpen:n,isDismissable:o=!1,isKeyboardDismissDisabled:i=!1,shouldCloseOnInteractOutside:a}=r;f.useEffect(()=>(n&&ue.push(e),()=>{let b=ue.indexOf(e);b>=0&&ue.splice(b,1)}),[n,e]);let l=()=>{ue[ue.length-1]===e&&t&&t()},c=b=>{(!a||a(b.target))&&ue[ue.length-1]===e&&(b.stopPropagation(),b.preventDefault())},u=b=>{(!a||a(b.target))&&(ue[ue.length-1]===e&&(b.stopPropagation(),b.preventDefault()),l())},m=b=>{b.key==="Escape"&&!i&&!b.nativeEvent.isComposing&&(b.stopPropagation(),b.preventDefault(),l())};zn({ref:e,onInteractOutside:o&&n?u:null,onInteractOutsideStart:c});let{focusWithinProps:h}=xt({isDisabled:!s,onBlurWithin:b=>{!b.relatedTarget||eo(b.relatedTarget)||(!a||a(b.relatedTarget))&&t()}}),p=b=>{b.target===b.currentTarget&&b.preventDefault()};return{overlayProps:{onKeyDown:m,...h},underlayProps:{onPointerDown:p}}}const et=typeof document<"u"&&window.visualViewport,io=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let Ie=0,tt;function ao(r={}){let{isDisabled:e}=r;J(()=>{if(!e)return Ie++,Ie===1&&(an()?tt=co():tt=lo()),()=>{Ie--,Ie===0&&tt()}},[e])}function lo(){return Se(we(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`),we(document.documentElement,"overflow","hidden"))}function co(){let r,e,t=c=>{r=Br(c.target,!0),!(r===document.documentElement&&r===document.body)&&r instanceof HTMLElement&&window.getComputedStyle(r).overscrollBehavior==="auto"&&(e=we(r,"overscrollBehavior","contain"))},s=c=>{if(!r||r===document.documentElement||r===document.body){c.preventDefault();return}r.scrollHeight===r.clientHeight&&r.scrollWidth===r.clientWidth&&c.preventDefault()},n=c=>{let u=c.target;Qt(u)&&u!==document.activeElement&&(c.preventDefault(),a(),u.style.transform="translateY(-2000px)",u.focus(),requestAnimationFrame(()=>{u.style.transform=""})),e&&e()},o=c=>{let u=c.target;Qt(u)&&(a(),u.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{u.style.transform="",et&&(et.height<window.innerHeight?requestAnimationFrame(()=>{Xt(u)}):et.addEventListener("resize",()=>Xt(u),{once:!0}))}))},i=null,a=()=>{if(i)return;let c=()=>{window.scrollTo(0,0)},u=window.pageXOffset,m=window.pageYOffset;i=Se(ke(window,"scroll",c),we(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`),we(document.documentElement,"overflow","hidden"),we(document.body,"marginTop",`-${m}px`),()=>{window.scrollTo(u,m)}),window.scrollTo(0,0)},l=Se(ke(document,"touchstart",t,{passive:!1,capture:!0}),ke(document,"touchmove",s,{passive:!1,capture:!0}),ke(document,"touchend",n,{passive:!1,capture:!0}),ke(document,"focus",o,!0));return()=>{e==null||e(),i==null||i(),l()}}function we(r,e,t){let s=r.style[e];return r.style[e]=t,()=>{r.style[e]=s}}function ke(r,e,t,s){return r.addEventListener(e,t,s),()=>{r.removeEventListener(e,t,s)}}function Xt(r){let e=document.scrollingElement||document.documentElement;for(;r&&r!==e;){let t=Br(r);if(t!==document.documentElement&&t!==document.body&&t!==r){let s=t.getBoundingClientRect().top,n=r.getBoundingClientRect().top;n>s+r.clientHeight&&(t.scrollTop+=n-s)}r=t.parentElement}}function Qt(r){return r instanceof HTMLInputElement&&!io.has(r.type)||r instanceof HTMLTextAreaElement||r instanceof HTMLElement&&r.isContentEditable}var Fr={};Fr={dismiss:"تجاهل"};var jr={};jr={dismiss:"Отхвърляне"};var Ur={};Ur={dismiss:"Odstranit"};var Wr={};Wr={dismiss:"Luk"};var zr={};zr={dismiss:"Schließen"};var Hr={};Hr={dismiss:"Απόρριψη"};var Vr={};Vr={dismiss:"Dismiss"};var qr={};qr={dismiss:"Descartar"};var Yr={};Yr={dismiss:"Lõpeta"};var Jr={};Jr={dismiss:"Hylkää"};var Gr={};Gr={dismiss:"Rejeter"};var Xr={};Xr={dismiss:"התעלם"};var Qr={};Qr={dismiss:"Odbaci"};var Zr={};Zr={dismiss:"Elutasítás"};var es={};es={dismiss:"Ignora"};var ts={};ts={dismiss:"閉じる"};var rs={};rs={dismiss:"무시"};var ss={};ss={dismiss:"Atmesti"};var ns={};ns={dismiss:"Nerādīt"};var os={};os={dismiss:"Lukk"};var is={};is={dismiss:"Negeren"};var as={};as={dismiss:"Zignoruj"};var ls={};ls={dismiss:"Descartar"};var cs={};cs={dismiss:"Dispensar"};var us={};us={dismiss:"Revocare"};var ds={};ds={dismiss:"Пропустить"};var fs={};fs={dismiss:"Zrušiť"};var hs={};hs={dismiss:"Opusti"};var ps={};ps={dismiss:"Odbaci"};var ms={};ms={dismiss:"Avvisa"};var bs={};bs={dismiss:"Kapat"};var gs={};gs={dismiss:"Скасувати"};var ys={};ys={dismiss:"取消"};var vs={};vs={dismiss:"關閉"};var xs={};xs={"ar-AE":Fr,"bg-BG":jr,"cs-CZ":Ur,"da-DK":Wr,"de-DE":zr,"el-GR":Hr,"en-US":Vr,"es-ES":qr,"et-EE":Yr,"fi-FI":Jr,"fr-FR":Gr,"he-IL":Xr,"hr-HR":Qr,"hu-HU":Zr,"it-IT":es,"ja-JP":ts,"ko-KR":rs,"lt-LT":ss,"lv-LV":ns,"nb-NO":os,"nl-NL":is,"pl-PL":as,"pt-BR":ls,"pt-PT":cs,"ro-RO":us,"ru-RU":ds,"sk-SK":fs,"sl-SI":hs,"sr-SP":ps,"sv-SE":ms,"tr-TR":bs,"uk-UA":gs,"zh-CN":ys,"zh-TW":vs};const Zt={border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"};function uo(r={}){let{style:e,isFocusable:t}=r,[s,n]=f.useState(!1),{focusWithinProps:o}=xt({isDisabled:!t,onFocusWithinChange:a=>n(a)}),i=f.useMemo(()=>s?e:e?{...Zt,...e}:Zt,[s]);return{visuallyHiddenProps:{...o,style:i}}}function fo(r){let{children:e,elementType:t="div",isFocusable:s,style:n,...o}=r,{visuallyHiddenProps:i}=uo(r);return z.createElement(t,j(o,i),e)}function ho(r){return r&&r.__esModule?r.default:r}function er(r){let{onDismiss:e,...t}=r,s=Bn(ho(xs),"@react-aria/overlays"),n=Sn(t,s.format("dismiss")),o=()=>{e&&e()};return z.createElement(fo,null,z.createElement("button",{...n,tabIndex:-1,onClick:o,style:{width:1,height:1}}))}let Pe=new WeakMap,X=[];function po(r,e=document.body){let t=new Set(r),s=new Set,n=l=>{for(let h of l.querySelectorAll("[data-live-announcer], [data-react-aria-top-layer]"))t.add(h);let c=h=>{if(t.has(h)||s.has(h.parentElement)&&h.parentElement.getAttribute("role")!=="row")return NodeFilter.FILTER_REJECT;for(let p of t)if(h.contains(p))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},u=document.createTreeWalker(l,NodeFilter.SHOW_ELEMENT,{acceptNode:c}),m=c(l);if(m===NodeFilter.FILTER_ACCEPT&&o(l),m!==NodeFilter.FILTER_REJECT){let h=u.nextNode();for(;h!=null;)o(h),h=u.nextNode()}},o=l=>{var c;let u=(c=Pe.get(l))!==null&&c!==void 0?c:0;l.getAttribute("aria-hidden")==="true"&&u===0||(u===0&&l.setAttribute("aria-hidden","true"),s.add(l),Pe.set(l,u+1))};X.length&&X[X.length-1].disconnect(),n(e);let i=new MutationObserver(l=>{for(let c of l)if(!(c.type!=="childList"||c.addedNodes.length===0)&&![...t,...s].some(u=>u.contains(c.target))){for(let u of c.removedNodes)u instanceof Element&&(t.delete(u),s.delete(u));for(let u of c.addedNodes)(u instanceof HTMLElement||u instanceof SVGElement)&&(u.dataset.liveAnnouncer==="true"||u.dataset.reactAriaTopLayer==="true")?t.add(u):u instanceof Element&&n(u)}});i.observe(e,{childList:!0,subtree:!0});let a={observe(){i.observe(e,{childList:!0,subtree:!0})},disconnect(){i.disconnect()}};return X.push(a),()=>{i.disconnect();for(let l of s){let c=Pe.get(l);c===1?(l.removeAttribute("aria-hidden"),Pe.delete(l)):Pe.set(l,c-1)}a===X[X.length-1]?(X.pop(),X.length&&X[X.length-1].observe()):X.splice(X.indexOf(a),1)}}const mo=f.createContext({});function bo(){var r;return(r=f.useContext(mo))!==null&&r!==void 0?r:{}}const ws=z.createContext(null);function go(r){let e=kr(),{portalContainer:t=e?null:document.body,isExiting:s}=r,[n,o]=f.useState(!1),i=f.useMemo(()=>({contain:n,setContain:o}),[n,o]),{getContainer:a}=bo();if(!r.portalContainer&&a&&(t=a()),!t)return null;let l=r.children;return r.disableFocusManagement||(l=z.createElement(Jn,{restoreFocus:!0,contain:n&&!s},l)),l=z.createElement(ws.Provider,{value:i},z.createElement(Wn,null,l)),ln.createPortal(l,t)}function $s(){let r=f.useContext(ws),e=r==null?void 0:r.setContain;J(()=>{e==null||e(!0)},[e])}var yo=Ae({slots:{base:"w-full relative flex flex-col gap-1 p-1",list:"w-full flex flex-col gap-0.5 outline-none",emptyContent:["h-10","px-2","py-1.5","w-full","h-full","text-foreground-400","text-start"]}}),tr=Ae({slots:{base:["flex","group","gap-2","items-center","justify-between","relative","px-2","py-1.5","w-full","h-full","box-border","rounded-small","subpixel-antialiased","outline-none","cursor-pointer","tap-highlight-transparent",...Pr,"data-[focus-visible=true]:dark:ring-offset-background-content1"],wrapper:"w-full flex flex-col items-start justify-center",title:"flex-1 text-small font-normal truncate",description:["w-full","text-tiny","text-foreground-500","group-hover:text-current"],selectedIcon:["text-inherit","w-3","h-3","flex-shrink-0"],shortcut:["px-1","py-0.5","rounded","font-sans","text-foreground-500","text-tiny","border-small","border-default-300","group-hover:border-current"]},variants:{variant:{solid:{base:""},bordered:{base:"border-medium border-transparent bg-transparent"},light:{base:"bg-transparent"},faded:{base:["border-small border-transparent hover:border-default data-[hover=true]:bg-default-100","data-[selectable=true]:focus:border-default data-[selectable=true]:focus:bg-default-100"]},flat:{base:""},shadow:{base:"data-[hover=true]:shadow-lg"}},color:{default:{},primary:{},secondary:{},success:{},warning:{},danger:{}},showDivider:{true:{base:["mb-1.5","after:content-['']","after:absolute","after:-bottom-1","after:left-0","after:right-0","after:h-divider","after:bg-divider"]},false:{}},isDisabled:{true:{base:"opacity-disabled pointer-events-none"}},disableAnimation:{true:{},false:{base:"data-[hover=true]:transition-colors"}}},defaultVariants:{variant:"solid",color:"default",showDivider:!1},compoundVariants:[{variant:"solid",color:"default",class:{base:["data-[hover=true]:bg-default","data-[hover=true]:text-default-foreground","data-[selectable=true]:focus:bg-default","data-[selectable=true]:focus:text-default-foreground"]}},{variant:"solid",color:"primary",class:{base:["data-[hover=true]:bg-primary data-[hover=true]:text-primary-foreground","data-[selectable=true]:focus:bg-primary data-[selectable=true]:focus:text-primary-foreground"]}},{variant:"solid",color:"secondary",class:{base:["data-[hover=true]:bg-secondary data-[hover=true]:text-secondary-foreground","data-[selectable=true]:focus:bg-secondary data-[selectable=true]:focus:text-secondary-foreground"]}},{variant:"solid",color:"success",class:{base:["data-[hover=true]:bg-success data-[hover=true]:text-success-foreground","data-[selectable=true]:focus:bg-success data-[selectable=true]:focus:text-success-foreground"]}},{variant:"solid",color:"warning",class:{base:["data-[hover=true]:bg-warning data-[hover=true]:text-warning-foreground","data-[selectable=true]:focus:bg-warning data-[selectable=true]:focus:text-warning-foreground"]}},{variant:"solid",color:"danger",class:{base:["data-[hover=true]:bg-danger data-[hover=true]:text-danger-foreground","data-[selectable=true]:focus:bg-danger data-[selectable=true]:focus:text-danger-foreground"]}},{variant:"shadow",color:"default",class:{base:["data-[hover=true]:shadow-default/50 data-[hover=true]:bg-default data-[hover=true]:text-default-foreground","data-[selectable=true]:focus:shadow-default/50 data-[selectable=true]:focus:bg-default data-[selectable=true]:focus:text-default-foreground"]}},{variant:"shadow",color:"primary",class:{base:["data-[hover=true]:shadow-primary/30 data-[hover=true]:bg-primary data-[hover=true]:text-primary-foreground","data-[selectable=true]:focus:shadow-primary/30 data-[selectable=true]:focus:bg-primary data-[selectable=true]:focus:text-primary-foreground"]}},{variant:"shadow",color:"secondary",class:{base:["data-[hover=true]:shadow-secondary/30 data-[hover=true]:bg-secondary data-[hover=true]:text-secondary-foreground","data-[selectable=true]:focus:shadow-secondary/30 data-[selectable=true]:focus:bg-secondary data-[selectable=true]:focus:text-secondary-foreground"]}},{variant:"shadow",color:"success",class:{base:["data-[hover=true]:shadow-success/30 data-[hover=true]:bg-success data-[hover=true]:text-success-foreground","data-[selectable=true]:focus:shadow-success/30 data-[selectable=true]:focus:bg-success data-[selectable=true]:focus:text-success-foreground"]}},{variant:"shadow",color:"warning",class:{base:["data-[hover=true]:shadow-warning/30 data-[hover=true]:bg-warning data-[hover=true]:text-warning-foreground","data-[selectable=true]:focus:shadow-warning/30 data-[selectable=true]:focus:bg-warning data-[selectable=true]:focus:text-warning-foreground"]}},{variant:"shadow",color:"danger",class:{base:["data-[hover=true]:shadow-danger/30 data-[hover=true]:bg-danger data-[hover=true]:text-danger-foreground","data-[selectable=true]:focus:shadow-danger/30 data-[selectable=true]:focus:bg-danger data-[selectable=true]:focus:text-danger-foreground"]}},{variant:"bordered",color:"default",class:{base:["data-[hover=true]:border-default","data-[selectable=true]:focus:border-default"]}},{variant:"bordered",color:"primary",class:{base:["data-[hover=true]:border-primary data-[hover=true]:text-primary","data-[selectable=true]:focus:border-primary data-[selectable=true]:focus:text-primary"]}},{variant:"bordered",color:"secondary",class:{base:["data-[hover=true]:border-secondary data-[hover=true]:text-secondary","data-[selectable=true]:focus:border-secondary data-[selectable=true]:focus:text-secondary"]}},{variant:"bordered",color:"success",class:{base:["data-[hover=true]:border-success data-[hover=true]:text-success","data-[selectable=true]:focus:border-success data-[selectable=true]:focus:text-success"]}},{variant:"bordered",color:"warning",class:{base:["data-[hover=true]:border-warning data-[hover=true]:text-warning","data-[selectable=true]:focus:border-warning data-[selectable=true]:focus:text-warning"]}},{variant:"bordered",color:"danger",class:{base:["data-[hover=true]:border-danger data-[hover=true]:text-danger","data-[selectable=true]:focus:border-danger data-[selectable=true]:focus:text-danger"]}},{variant:"flat",color:"default",class:{base:["data-[hover=true]:bg-default/40","data-[hover=true]:text-default-foreground","data-[selectable=true]:focus:bg-default/40","data-[selectable=true]:focus:text-default-foreground"]}},{variant:"flat",color:"primary",class:{base:["data-[hover=true]:bg-primary/20 data-[hover=true]:text-primary","data-[selectable=true]:focus:bg-primary/20 data-[selectable=true]:focus:text-primary"]}},{variant:"flat",color:"secondary",class:{base:["data-[hover=true]:bg-secondary/20 data-[hover=true]:text-secondary","data-[selectable=true]:focus:bg-secondary/20 data-[selectable=true]:focus:text-secondary"]}},{variant:"flat",color:"success",class:{base:["data-[hover=true]:bg-success/20 data-[hover=true]:text-success","data-[selectable=true]:focus:bg-success/20 data-[selectable=true]:focus:text-success"]}},{variant:"flat",color:"warning",class:{base:["data-[hover=true]:bg-warning/20 data-[hover=true]:text-warning","data-[selectable=true]:focus:bg-warning/20 data-[selectable=true]:focus:text-warning"]}},{variant:"flat",color:"danger",class:{base:["data-[hover=true]:bg-danger/20 data-[hover=true]:text-danger","data-[selectable=true]:focus:bg-danger/20 data-[selectable=true]:focus:text-danger"]}},{variant:"faded",color:"default",class:{base:["data-[hover=true]:text-default-foreground","data-[selectable=true]:focus:text-default-foreground"]}},{variant:"faded",color:"primary",class:{base:["data-[hover=true]:text-primary","data-[selectable=true]:focus:text-primary"]}},{variant:"faded",color:"secondary",class:{base:["data-[hover=true]:text-secondary","data-[selectable=true]:focus:text-secondary"]}},{variant:"faded",color:"success",class:{base:["data-[hover=true]:text-success","data-[selectable=true]:focus:text-success"]}},{variant:"faded",color:"warning",class:{base:["data-[hover=true]:text-warning","data-[selectable=true]:focus:text-warning"]}},{variant:"faded",color:"danger",class:{base:["data-[hover=true]:text-danger","data-[selectable=true]:focus:text-danger"]}},{variant:"light",color:"default",class:{base:["data-[hover=true]:text-default-500","data-[selectable=true]:focus:text-default-500"]}},{variant:"light",color:"primary",class:{base:["data-[hover=true]:text-primary","data-[selectable=true]:focus:text-primary"]}},{variant:"light",color:"secondary",class:{base:["data-[hover=true]:text-secondary","data-[selectable=true]:focus:text-secondary"]}},{variant:"light",color:"success",class:{base:["data-[hover=true]:text-success","data-[selectable=true]:focus:text-success"]}},{variant:"light",color:"warning",class:{base:["data-[hover=true]:text-warning","data-[selectable=true]:focus:text-warning"]}},{variant:"light",color:"danger",class:{base:["data-[hover=true]:text-danger","data-[selectable=true]:focus:text-danger"]}}]}),vo=Ae({slots:{base:"relative mb-2",heading:"pl-1 text-tiny text-foreground-500",group:"data-[has-title=true]:pt-1",divider:"mt-2"}}),rr=Ae({slots:{wrapper:["flex","w-screen","h-[100dvh]","fixed","inset-0","z-50","overflow-x-auto","justify-center"],base:["flex","flex-col","relative","bg-white","z-50","w-full","box-border","bg-content1","outline-none","mx-1","my-1","sm:mx-6","sm:my-16"],backdrop:"z-50",header:"flex py-4 px-6 flex-initial text-large font-semibold",body:"flex flex-1 flex-col gap-3 px-6 py-2",footer:"flex flex-row gap-2 px-6 py-4 justify-end",closeButton:["absolute","appearance-none","outline-none","select-none","top-1","right-1","rtl:left-1","rtl:right-[unset]","p-2","text-foreground-500","rounded-full","hover:bg-default-100","active:bg-default-200","tap-highlight-transparent",...Pr]},variants:{size:{xs:{base:"max-w-xs"},sm:{base:"max-w-sm"},md:{base:"max-w-md"},lg:{base:"max-w-lg"},xl:{base:"max-w-xl"},"2xl":{base:"max-w-2xl"},"3xl":{base:"max-w-3xl"},"4xl":{base:"max-w-4xl"},"5xl":{base:"max-w-5xl"},full:{base:"my-0 mx-0 sm:mx-0 sm:my-0 max-w-full h-[100dvh] !rounded-none"}},radius:{none:{base:"rounded-none"},sm:{base:"rounded-small"},md:{base:"rounded-medium"},lg:{base:"rounded-large"}},placement:{auto:{wrapper:"items-end sm:items-center"},center:{wrapper:"items-center sm:items-center"},top:{wrapper:"items-start sm:items-start"},"top-center":{wrapper:"items-start sm:items-center"},bottom:{wrapper:"items-end sm:items-end"},"bottom-center":{wrapper:"items-end sm:items-center"}},shadow:{sm:{base:"shadow-small"},md:{base:"shadow-medium"},lg:{base:"shadow-large"}},backdrop:{transparent:{backdrop:"hidden"},opaque:{backdrop:"bg-overlay/50 backdrop-opacity-disabled"},blur:{backdrop:"backdrop-blur-md backdrop-saturate-150 bg-overlay/30"}},scrollBehavior:{normal:{base:"overflow-y-hidden"},inside:{base:"max-h-[calc(100%_-_8rem)]",body:"overflow-y-auto"},outside:{wrapper:"items-start sm:items-start overflow-y-auto",base:"my-16"}},disableAnimation:{false:{wrapper:["[--scale-enter:100%]","[--scale-exit:100%]","[--slide-enter:0px]","[--slide-exit:80px]","sm:[--scale-enter:100%]","sm:[--scale-exit:103%]","sm:[--slide-enter:0px]","sm:[--slide-exit:0px]"]}}},defaultVariants:{size:"md",radius:"lg",shadow:"sm",placement:"auto",backdrop:"opaque",scrollBehavior:"normal"},compoundVariants:[{backdrop:["opaque","blur"],class:{backdrop:"w-screen h-screen fixed inset-0"}}]}),xo=Ae({base:"shrink-0 bg-divider border-none",variants:{orientation:{horizontal:"w-full h-divider",vertical:"h-full w-divider"}},defaultVariants:{orientation:"horizontal"}});function ut(r){return cn()?r.altKey:r.ctrlKey}function ve(r){return Nr()?r.metaKey:r.ctrlKey}const wo=1e3;function $o(r){let{keyboardDelegate:e,selectionManager:t,onTypeSelect:s}=r,n=f.useRef({search:"",timeout:null}).current,o=i=>{let a=So(i.key);if(!a||i.ctrlKey||i.metaKey||!i.currentTarget.contains(i.target))return;a===" "&&n.search.trim().length>0&&(i.preventDefault(),"continuePropagation"in i||i.stopPropagation()),n.search+=a;let l=e.getKeyForSearch(n.search,t.focusedKey);l==null&&(l=e.getKeyForSearch(n.search)),l!=null&&(t.setFocusedKey(l),s&&s(l)),clearTimeout(n.timeout),n.timeout=setTimeout(()=>{n.search=""},wo)};return{typeSelectProps:{onKeyDownCapture:e.getKeyForSearch?o:null}}}function So(r){return r.length===1||!/^[A-Z]/i.test(r)?r:""}function Eo(r){let{selectionManager:e,keyboardDelegate:t,ref:s,autoFocus:n=!1,shouldFocusWrap:o=!1,disallowEmptySelection:i=!1,disallowSelectAll:a=!1,selectOnFocus:l=e.selectionBehavior==="replace",disallowTypeAhead:c=!1,shouldUseVirtualFocus:u,allowsTabNavigation:m=!1,isVirtualized:h,scrollRef:p=s,linkBehavior:b="action"}=r,{direction:x}=yt(),w=Tr(),S=y=>{if(y.altKey&&y.key==="Tab"&&y.preventDefault(),!s.current.contains(y.target))return;const R=(k,Y)=>{if(k!=null){if(e.isLink(k)&&b==="selection"&&l&&!ut(y)){un.flushSync(()=>{e.setFocusedKey(k,Y)});let G=p.current.querySelector(`[data-key="${CSS.escape(k.toString())}"]`),me=e.getItemProps(k);w.open(G,y,me.href,me.routerOptions);return}if(e.setFocusedKey(k,Y),e.isLink(k)&&b==="override")return;y.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(k):l&&!ut(y)&&e.replaceSelection(k)}};switch(y.key){case"ArrowDown":if(t.getKeyBelow){var E,N;y.preventDefault();let k=e.focusedKey!=null?t.getKeyBelow(e.focusedKey):(E=t.getFirstKey)===null||E===void 0?void 0:E.call(t);k==null&&o&&(k=(N=t.getFirstKey)===null||N===void 0?void 0:N.call(t,e.focusedKey)),R(k)}break;case"ArrowUp":if(t.getKeyAbove){var B,D;y.preventDefault();let k=e.focusedKey!=null?t.getKeyAbove(e.focusedKey):(B=t.getLastKey)===null||B===void 0?void 0:B.call(t);k==null&&o&&(k=(D=t.getLastKey)===null||D===void 0?void 0:D.call(t,e.focusedKey)),R(k)}break;case"ArrowLeft":if(t.getKeyLeftOf){var M,v;y.preventDefault();let k=t.getKeyLeftOf(e.focusedKey);k==null&&o&&(k=x==="rtl"?(M=t.getFirstKey)===null||M===void 0?void 0:M.call(t,e.focusedKey):(v=t.getLastKey)===null||v===void 0?void 0:v.call(t,e.focusedKey)),R(k,x==="rtl"?"first":"last")}break;case"ArrowRight":if(t.getKeyRightOf){var _,ee;y.preventDefault();let k=t.getKeyRightOf(e.focusedKey);k==null&&o&&(k=x==="rtl"?(_=t.getLastKey)===null||_===void 0?void 0:_.call(t,e.focusedKey):(ee=t.getFirstKey)===null||ee===void 0?void 0:ee.call(t,e.focusedKey)),R(k,x==="rtl"?"last":"first")}break;case"Home":if(t.getFirstKey){y.preventDefault();let k=t.getFirstKey(e.focusedKey,ve(y));e.setFocusedKey(k),ve(y)&&y.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(k):l&&e.replaceSelection(k)}break;case"End":if(t.getLastKey){y.preventDefault();let k=t.getLastKey(e.focusedKey,ve(y));e.setFocusedKey(k),ve(y)&&y.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(k):l&&e.replaceSelection(k)}break;case"PageDown":if(t.getKeyPageBelow){y.preventDefault();let k=t.getKeyPageBelow(e.focusedKey);R(k)}break;case"PageUp":if(t.getKeyPageAbove){y.preventDefault();let k=t.getKeyPageAbove(e.focusedKey);R(k)}break;case"a":ve(y)&&e.selectionMode==="multiple"&&a!==!0&&(y.preventDefault(),e.selectAll());break;case"Escape":!i&&e.selectedKeys.size!==0&&(y.stopPropagation(),y.preventDefault(),e.clearSelection());break;case"Tab":if(!m){if(y.shiftKey)s.current.focus();else{let k=he(s.current,{tabbable:!0}),Y,G;do G=k.lastChild(),G&&(Y=G);while(G);Y&&!Y.contains(document.activeElement)&&Ft(Y)}break}}},g=f.useRef({top:0,left:0});jn(p,"scroll",h?null:()=>{g.current={top:p.current.scrollTop,left:p.current.scrollLeft}});let $=y=>{if(e.isFocused){y.currentTarget.contains(y.target)||e.setFocused(!1);return}if(y.currentTarget.contains(y.target)){if(e.setFocused(!0),e.focusedKey==null){let N=D=>{D!=null&&(e.setFocusedKey(D),l&&e.replaceSelection(D))},B=y.relatedTarget;var R,E;B&&y.currentTarget.compareDocumentPosition(B)&Node.DOCUMENT_POSITION_FOLLOWING?N((R=e.lastSelectedKey)!==null&&R!==void 0?R:t.getLastKey()):N((E=e.firstSelectedKey)!==null&&E!==void 0?E:t.getFirstKey())}else h||(p.current.scrollTop=g.current.top,p.current.scrollLeft=g.current.left);if(!h&&e.focusedKey!=null){let N=p.current.querySelector(`[data-key="${CSS.escape(e.focusedKey.toString())}"]`);N&&(N.contains(document.activeElement)||Ft(N),Mt()==="keyboard"&&Jt(N,{containingElement:s.current}))}}},C=y=>{y.currentTarget.contains(y.relatedTarget)||e.setFocused(!1)};const T=f.useRef(n);f.useEffect(()=>{if(T.current){let y=null;n==="first"&&(y=t.getFirstKey()),n==="last"&&(y=t.getLastKey());let R=e.selectedKeys;if(R.size){for(let E of R)if(e.canSelectItem(E)){y=E;break}}e.setFocused(!0),e.setFocusedKey(y),y==null&&!u&&$e(s.current)}},[]);let P=f.useRef(e.focusedKey);f.useEffect(()=>{let y=Mt();if(e.isFocused&&e.focusedKey!=null&&(p!=null&&p.current)){let R=p.current.querySelector(`[data-key="${CSS.escape(e.focusedKey.toString())}"]`);R&&(y==="keyboard"||T.current)&&(h||Dr(p.current,R),y!=="virtual"&&Jt(R,{containingElement:s.current}))}e.isFocused&&e.focusedKey==null&&P.current!=null&&$e(s.current),P.current=e.focusedKey,T.current=!1},[h,p,e.focusedKey,e.isFocused,s]);let A={onKeyDown:S,onFocus:$,onBlur:C,onMouseDown(y){p.current===y.target&&y.preventDefault()}},{typeSelectProps:O}=$o({keyboardDelegate:t,selectionManager:e});c||(A=j(O,A));let L;return u||(L=e.focusedKey==null?0:-1),{collectionProps:{...A,tabIndex:L}}}function Co(r){let{selectionManager:e,key:t,ref:s,shouldSelectOnPressUp:n,shouldUseVirtualFocus:o,focus:i,isDisabled:a,onAction:l,allowsDifferentPressOrigin:c,linkBehavior:u="action"}=r,m=Tr(),h=v=>{if(v.pointerType==="keyboard"&&ut(v))e.toggleSelection(t);else{if(e.selectionMode==="none")return;if(e.isLink(t)){if(u==="selection"){let _=e.getItemProps(t);m.open(s.current,v,_.href,_.routerOptions),e.setSelectedKeys(e.selectedKeys);return}else if(u==="override"||u==="none")return}e.selectionMode==="single"?e.isSelected(t)&&!e.disallowEmptySelection?e.toggleSelection(t):e.replaceSelection(t):v&&v.shiftKey?e.extendSelection(t):e.selectionBehavior==="toggle"||v&&(ve(v)||v.pointerType==="touch"||v.pointerType==="virtual")?e.toggleSelection(t):e.replaceSelection(t)}};f.useEffect(()=>{t===e.focusedKey&&e.isFocused&&!o&&(i?i():document.activeElement!==s.current&&$e(s.current))},[s,t,e.focusedKey,e.childFocusStrategy,e.isFocused,o]),a=a||e.isDisabled(t);let p={};!o&&!a?p={tabIndex:t===e.focusedKey?0:-1,onFocus(v){v.target===s.current&&e.setFocusedKey(t)}}:a&&(p.onMouseDown=v=>{v.preventDefault()});let b=e.isLink(t)&&u==="override",x=e.isLink(t)&&u!=="selection"&&u!=="none",w=!a&&e.canSelectItem(t)&&!b,S=(l||x)&&!a,g=S&&(e.selectionBehavior==="replace"?!w:!w||e.isEmpty),$=S&&w&&e.selectionBehavior==="replace",C=g||$,T=f.useRef(null),P=C&&w,A=f.useRef(!1),O=f.useRef(!1),L=v=>{if(l&&l(),x){let _=e.getItemProps(t);m.open(s.current,v,_.href,_.routerOptions)}},y={};n?(y.onPressStart=v=>{T.current=v.pointerType,A.current=P,v.pointerType==="keyboard"&&(!C||nr())&&h(v)},c?(y.onPressUp=g?null:v=>{v.pointerType!=="keyboard"&&w&&h(v)},y.onPress=g?L:null):y.onPress=v=>{if(g||$&&v.pointerType!=="mouse"){if(v.pointerType==="keyboard"&&!sr())return;L(v)}else v.pointerType!=="keyboard"&&w&&h(v)}):(y.onPressStart=v=>{T.current=v.pointerType,A.current=P,O.current=g,w&&(v.pointerType==="mouse"&&!g||v.pointerType==="keyboard"&&(!S||nr()))&&h(v)},y.onPress=v=>{(v.pointerType==="touch"||v.pointerType==="pen"||v.pointerType==="virtual"||v.pointerType==="keyboard"&&C&&sr()||v.pointerType==="mouse"&&O.current)&&(C?L(v):w&&h(v))}),p["data-key"]=t,y.preventFocusOnPress=o;let{pressProps:R,isPressed:E}=vt(y),N=$?v=>{T.current==="mouse"&&(v.stopPropagation(),v.preventDefault(),L(v))}:void 0,{longPressProps:B}=Vn({isDisabled:!P,onLongPress(v){v.pointerType==="touch"&&(h(v),e.setSelectionBehavior("toggle"))}}),D=v=>{T.current==="touch"&&A.current&&v.preventDefault()},M=e.isLink(t)?v=>{dn.isOpening||v.preventDefault()}:void 0;return{itemProps:j(p,w||g?R:{},P?B:{},{onDoubleClick:N,onDragStartCapture:D,onClick:M}),isPressed:E,isSelected:e.isSelected(t),isFocused:e.isFocused&&e.focusedKey===t,isDisabled:a,allowsSelection:w,hasAction:C}}function sr(){let r=window.event;return(r==null?void 0:r.key)==="Enter"}function nr(){let r=window.event;return(r==null?void 0:r.key)===" "||(r==null?void 0:r.code)==="Space"}class ko{isDisabled(e){var t;return this.disabledBehavior==="all"&&(((t=e.props)===null||t===void 0?void 0:t.isDisabled)||this.disabledKeys.has(e.key))}getNextKey(e){for(e=this.collection.getKeyAfter(e);e!=null;){let t=this.collection.getItem(e);if(t.type==="item"&&!this.isDisabled(t))return e;e=this.collection.getKeyAfter(e)}return null}getPreviousKey(e){for(e=this.collection.getKeyBefore(e);e!=null;){let t=this.collection.getItem(e);if(t.type==="item"&&!this.isDisabled(t))return e;e=this.collection.getKeyBefore(e)}return null}findKey(e,t,s){let n=this.getItem(e);if(!n)return null;let o=n.getBoundingClientRect();do e=t(e),n=this.getItem(e);while(n&&s(o,n.getBoundingClientRect()));return e}isSameRow(e,t){return e.top===t.top||e.left!==t.left}isSameColumn(e,t){return e.left===t.left||e.top!==t.top}getKeyBelow(e){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(e,t=>this.getNextKey(t),this.isSameRow):this.getNextKey(e)}getKeyAbove(e){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(e,t=>this.getPreviousKey(t),this.isSameRow):this.getPreviousKey(e)}getNextColumn(e,t){return t?this.getPreviousKey(e):this.getNextKey(e)}getKeyRightOf(e){return this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(e,this.direction==="rtl"):this.findKey(e,t=>this.getNextColumn(t,this.direction==="rtl"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(e,this.direction==="rtl"):null}getKeyLeftOf(e){return this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(e,this.direction==="ltr"):this.findKey(e,t=>this.getNextColumn(t,this.direction==="ltr"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(e,this.direction==="ltr"):null}getFirstKey(){let e=this.collection.getFirstKey();for(;e!=null;){let t=this.collection.getItem(e);if((t==null?void 0:t.type)==="item"&&!this.isDisabled(t))return e;e=this.collection.getKeyAfter(e)}return null}getLastKey(){let e=this.collection.getLastKey();for(;e!=null;){let t=this.collection.getItem(e);if(t.type==="item"&&!this.isDisabled(t))return e;e=this.collection.getKeyBefore(e)}return null}getItem(e){return e!==null?this.ref.current.querySelector(`[data-key="${CSS.escape(e.toString())}"]`):null}getKeyPageAbove(e){let t=this.ref.current,s=this.getItem(e);if(!s)return null;if(!Ke(t))return this.getFirstKey();let n=t.getBoundingClientRect(),o=s.getBoundingClientRect();if(this.orientation==="horizontal"){let i=n.x-t.scrollLeft,a=Math.max(0,o.x-i+o.width-n.width);for(;s&&o.x-i>a;)e=this.getKeyAbove(e),s=e==null?null:this.getItem(e),o=s==null?void 0:s.getBoundingClientRect()}else{let i=n.y-t.scrollTop,a=Math.max(0,o.y-i+o.height-n.height);for(;s&&o.y-i>a;)e=this.getKeyAbove(e),s=e==null?null:this.getItem(e),o=s==null?void 0:s.getBoundingClientRect()}return e??this.getFirstKey()}getKeyPageBelow(e){let t=this.ref.current,s=this.getItem(e);if(!s)return null;if(!Ke(t))return this.getLastKey();let n=t.getBoundingClientRect(),o=s.getBoundingClientRect();if(this.orientation==="horizontal"){let i=n.x-t.scrollLeft,a=Math.min(t.scrollWidth,o.x-i-o.width+n.width);for(;s&&o.x-i<a;)e=this.getKeyBelow(e),s=e==null?null:this.getItem(e),o=s==null?void 0:s.getBoundingClientRect()}else{let i=n.y-t.scrollTop,a=Math.min(t.scrollHeight,o.y-i-o.height+n.height);for(;s&&o.y-i<a;)e=this.getKeyBelow(e),s=e==null?null:this.getItem(e),o=s==null?void 0:s.getBoundingClientRect()}return e??this.getLastKey()}getKeyForSearch(e,t){if(!this.collator)return null;let s=this.collection,n=t||this.getFirstKey();for(;n!=null;){let o=s.getItem(n),i=o.textValue.slice(0,e.length);if(o.textValue&&this.collator.compare(i,e)===0)return n;n=this.getKeyBelow(n)}return null}constructor(...e){if(e.length===1){let t=e[0];this.collection=t.collection,this.ref=t.ref,this.collator=t.collator,this.disabledKeys=t.disabledKeys||new Set,this.disabledBehavior=t.disabledBehavior||"all",this.orientation=t.orientation,this.direction=t.direction,this.layout=t.layout||"stack"}else this.collection=e[0],this.disabledKeys=e[1],this.ref=e[2],this.collator=e[3],this.layout="stack",this.orientation="vertical",this.disabledBehavior="all";this.layout==="stack"&&this.orientation==="vertical"&&(this.getKeyLeftOf=void 0,this.getKeyRightOf=void 0)}}function Po(r){let{selectionManager:e,collection:t,disabledKeys:s,ref:n,keyboardDelegate:o}=r,i=Un({usage:"search",sensitivity:"base"}),a=e.disabledBehavior,l=f.useMemo(()=>o||new ko({collection:t,disabledKeys:s,disabledBehavior:a,ref:n,collator:i}),[o,t,s,n,i,a]),{collectionProps:c}=Eo({...r,ref:n,selectionManager:e,keyboardDelegate:l});return{listProps:c}}var No=r=>{const{isSelected:e,isIndeterminate:t,disableAnimation:s,...n}=r;return d.jsx("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",width:"1em",...n,children:d.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})},de={ease:[.36,.66,.4,1],easeIn:[.4,0,1,1],easeOut:[0,0,.2,1],easeInOut:[.4,0,.2,1],spring:[.155,1.105,.295,1.12],springOut:[.57,-.15,.62,.07],softSpring:[.16,1.11,.3,1.02]},To={scaleSpring:{enter:{transform:"scale(1)",opacity:1,transition:{type:"spring",bounce:0,duration:.2}},exit:{transform:"scale(0.85)",opacity:0,transition:{type:"easeOut",duration:.15}}},scaleSpringOpacity:{initial:{opacity:0,transform:"scale(0.8)"},enter:{opacity:1,transform:"scale(1)",transition:{type:"spring",bounce:0,duration:.3}},exit:{opacity:0,transform:"scale(0.96)",transition:{type:"easeOut",bounce:0,duration:.15}}},scale:{enter:{scale:1},exit:{scale:.95}},scaleFadeIn:{enter:{transform:"scale(1)",opacity:1,transition:{duration:.25,ease:de.easeIn}},exit:{transform:"scale(0.95)",opacity:0,transition:{duration:.2,ease:de.easeOut}}},scaleInOut:{enter:{transform:"scale(1)",opacity:1,transition:{duration:.4,ease:de.ease}},exit:{transform:"scale(1.03)",opacity:0,transition:{duration:.3,ease:de.ease}}},fade:{enter:{opacity:1,transition:{duration:.4,ease:de.ease}},exit:{opacity:0,transition:{duration:.3,ease:de.ease}}},collapse:{enter:{opacity:1,height:"auto",transition:{height:{type:"spring",bounce:0,duration:.3},opacity:{easings:"ease",duration:.4}}},exit:{opacity:0,height:0,transition:{easings:"ease",duration:.3}}}};class te extends Set{constructor(e,t,s){super(e),e instanceof te?(this.anchorKey=t||e.anchorKey,this.currentKey=s||e.currentKey):(this.anchorKey=t,this.currentKey=s)}}function Ro(r,e,t){let[s,n]=f.useState(r||e),o=f.useRef(r!==void 0),i=r!==void 0;f.useEffect(()=>{let c=o.current;c!==i&&console.warn(`WARN: A component changed from ${c?"controlled":"uncontrolled"} to ${i?"controlled":"uncontrolled"}.`),o.current=i},[i]);let a=i?r:s,l=f.useCallback((c,...u)=>{let m=(h,...p)=>{t&&(Object.is(a,h)||t(h,...p)),i||(a=h)};typeof c=="function"?(console.warn("We can not support a function callback. See Github Issues for details https://github.com/adobe/react-spectrum/issues/2320"),n((p,...b)=>{let x=c(i?a:p,...b);return m(x,...u),i?p:x})):(i||n(c),m(c,...u))},[i,a,t]);return[a,l]}function Ko(r,e){if(r.size!==e.size)return!1;for(let t of r)if(!e.has(t))return!1;return!0}function Ao(r){let{selectionMode:e="none",disallowEmptySelection:t,allowDuplicateSelectionEvents:s,selectionBehavior:n="toggle",disabledBehavior:o="all"}=r,i=f.useRef(!1),[,a]=f.useState(!1),l=f.useRef(null),c=f.useRef(null),[,u]=f.useState(null),m=f.useMemo(()=>or(r.selectedKeys),[r.selectedKeys]),h=f.useMemo(()=>or(r.defaultSelectedKeys,new te),[r.defaultSelectedKeys]),[p,b]=Ro(m,h,r.onSelectionChange),x=f.useMemo(()=>r.disabledKeys?new Set(r.disabledKeys):new Set,[r.disabledKeys]),[w,S]=f.useState(n);n==="replace"&&w==="toggle"&&typeof p=="object"&&p.size===0&&S("replace");let g=f.useRef(n);return f.useEffect(()=>{n!==g.current&&(S(n),g.current=n)},[n]),{selectionMode:e,disallowEmptySelection:t,selectionBehavior:w,setSelectionBehavior:S,get isFocused(){return i.current},setFocused($){i.current=$,a($)},get focusedKey(){return l.current},get childFocusStrategy(){return c.current},setFocusedKey($,C="first"){l.current=$,c.current=C,u($)},selectedKeys:p,setSelectedKeys($){(s||!Ko($,p))&&b($)},disabledKeys:x,disabledBehavior:o}}function or(r,e){return r?r==="all"?"all":new te(r):e}function Oo(r,e){return typeof e.getChildren=="function"?e.getChildren(r.key):r.childNodes}function Lo(r){return Io(r)}function Io(r,e){for(let t of r)return t}function rt(r,e,t){if(e.parentKey===t.parentKey)return e.index-t.index;let s=[...ir(r,e),e],n=[...ir(r,t),t],o=s.slice(0,n.length).findIndex((i,a)=>i!==n[a]);return o!==-1?(e=s[o],t=n[o],e.index-t.index):s.findIndex(i=>i===t)>=0?1:(n.findIndex(i=>i===e)>=0,-1)}function ir(r,e){let t=[];for(;(e==null?void 0:e.parentKey)!=null;)e=r.getItem(e.parentKey),t.unshift(e);return t}class Bo{get selectionMode(){return this.state.selectionMode}get disallowEmptySelection(){return this.state.disallowEmptySelection}get selectionBehavior(){return this.state.selectionBehavior}setSelectionBehavior(e){this.state.setSelectionBehavior(e)}get isFocused(){return this.state.isFocused}setFocused(e){this.state.setFocused(e)}get focusedKey(){return this.state.focusedKey}get childFocusStrategy(){return this.state.childFocusStrategy}setFocusedKey(e,t){(e==null||this.collection.getItem(e))&&this.state.setFocusedKey(e,t)}get selectedKeys(){return this.state.selectedKeys==="all"?new Set(this.getSelectAllKeys()):this.state.selectedKeys}get rawSelection(){return this.state.selectedKeys}isSelected(e){return this.state.selectionMode==="none"?!1:(e=this.getKey(e),this.state.selectedKeys==="all"?this.canSelectItem(e):this.state.selectedKeys.has(e))}get isEmpty(){return this.state.selectedKeys!=="all"&&this.state.selectedKeys.size===0}get isSelectAll(){if(this.isEmpty)return!1;if(this.state.selectedKeys==="all")return!0;if(this._isSelectAll!=null)return this._isSelectAll;let e=this.getSelectAllKeys(),t=this.state.selectedKeys;return this._isSelectAll=e.every(s=>t.has(s)),this._isSelectAll}get firstSelectedKey(){let e=null;for(let t of this.state.selectedKeys){let s=this.collection.getItem(t);(!e||s&&rt(this.collection,s,e)<0)&&(e=s)}return e==null?void 0:e.key}get lastSelectedKey(){let e=null;for(let t of this.state.selectedKeys){let s=this.collection.getItem(t);(!e||s&&rt(this.collection,s,e)>0)&&(e=s)}return e==null?void 0:e.key}get disabledKeys(){return this.state.disabledKeys}get disabledBehavior(){return this.state.disabledBehavior}extendSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"){this.replaceSelection(e);return}e=this.getKey(e);let t;if(this.state.selectedKeys==="all")t=new te([e],e,e);else{let s=this.state.selectedKeys,n=s.anchorKey||e;t=new te(s,n,e);for(let o of this.getKeyRange(n,s.currentKey||e))t.delete(o);for(let o of this.getKeyRange(e,n))this.canSelectItem(o)&&t.add(o)}this.state.setSelectedKeys(t)}getKeyRange(e,t){let s=this.collection.getItem(e),n=this.collection.getItem(t);return s&&n?rt(this.collection,s,n)<=0?this.getKeyRangeInternal(e,t):this.getKeyRangeInternal(t,e):[]}getKeyRangeInternal(e,t){let s=[],n=e;for(;n;){let o=this.collection.getItem(n);if((o&&o.type==="item"||o.type==="cell"&&this.allowsCellSelection)&&s.push(n),n===t)return s;n=this.collection.getKeyAfter(n)}return[]}getKey(e){let t=this.collection.getItem(e);if(!t||t.type==="cell"&&this.allowsCellSelection)return e;for(;t.type!=="item"&&t.parentKey!=null;)t=this.collection.getItem(t.parentKey);return!t||t.type!=="item"?null:t.key}toggleSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"&&!this.isSelected(e)){this.replaceSelection(e);return}if(e=this.getKey(e),e==null)return;let t=new te(this.state.selectedKeys==="all"?this.getSelectAllKeys():this.state.selectedKeys);t.has(e)?t.delete(e):this.canSelectItem(e)&&(t.add(e),t.anchorKey=e,t.currentKey=e),!(this.disallowEmptySelection&&t.size===0)&&this.state.setSelectedKeys(t)}replaceSelection(e){if(this.selectionMode==="none"||(e=this.getKey(e),e==null))return;let t=this.canSelectItem(e)?new te([e],e,e):new te;this.state.setSelectedKeys(t)}setSelectedKeys(e){if(this.selectionMode==="none")return;let t=new te;for(let s of e)if(s=this.getKey(s),s!=null&&(t.add(s),this.selectionMode==="single"))break;this.state.setSelectedKeys(t)}getSelectAllKeys(){let e=[],t=s=>{for(;s!=null;){if(this.canSelectItem(s)){let n=this.collection.getItem(s);n.type==="item"&&e.push(s),n.hasChildNodes&&(this.allowsCellSelection||n.type!=="item")&&t(Lo(Oo(n,this.collection)).key)}s=this.collection.getKeyAfter(s)}};return t(this.collection.getFirstKey()),e}selectAll(){!this.isSelectAll&&this.selectionMode==="multiple"&&this.state.setSelectedKeys("all")}clearSelection(){!this.disallowEmptySelection&&(this.state.selectedKeys==="all"||this.state.selectedKeys.size>0)&&this.state.setSelectedKeys(new te)}toggleSelectAll(){this.isSelectAll?this.clearSelection():this.selectAll()}select(e,t){this.selectionMode!=="none"&&(this.selectionMode==="single"?this.isSelected(e)&&!this.disallowEmptySelection?this.toggleSelection(e):this.replaceSelection(e):this.selectionBehavior==="toggle"||t&&(t.pointerType==="touch"||t.pointerType==="virtual")?this.toggleSelection(e):this.replaceSelection(e))}isSelectionEqual(e){if(e===this.state.selectedKeys)return!0;let t=this.selectedKeys;if(e.size!==t.size)return!1;for(let s of e)if(!t.has(s))return!1;for(let s of t)if(!e.has(s))return!1;return!0}canSelectItem(e){var t;if(this.state.selectionMode==="none"||this.state.disabledKeys.has(e))return!1;let s=this.collection.getItem(e);return!(!s||!(s==null||(t=s.props)===null||t===void 0)&&t.isDisabled||s.type==="cell"&&!this.allowsCellSelection)}isDisabled(e){var t,s;return this.state.disabledBehavior==="all"&&(this.state.disabledKeys.has(e)||!!(!((s=this.collection.getItem(e))===null||s===void 0||(t=s.props)===null||t===void 0)&&t.isDisabled))}isLink(e){var t,s;return!!(!((s=this.collection.getItem(e))===null||s===void 0||(t=s.props)===null||t===void 0)&&t.href)}getItemProps(e){var t;return(t=this.collection.getItem(e))===null||t===void 0?void 0:t.props}constructor(e,t,s){this.collection=e,this.state=t;var n;this.allowsCellSelection=(n=s==null?void 0:s.allowsCellSelection)!==null&&n!==void 0?n:!1,this._isSelectAll=null}}function Ss(r){return null}Ss.getCollectionNode=function*(e,t){let{childItems:s,title:n,children:o}=e,i=e.title||e.children,a=e.textValue||(typeof i=="string"?i:"")||e["aria-label"]||"";!a&&!(t!=null&&t.suppressTextValueWarning)&&console.warn("<Item> with non-plain text contents is unsupported by type to select for accessibility. Please add a `textValue` prop."),yield{type:"item",props:e,rendered:i,textValue:a,"aria-label":e["aria-label"],hasChildNodes:Do(e),*childNodes(){if(s)for(let l of s)yield{type:"item",value:l};else if(n){let l=[];z.Children.forEach(o,c=>{l.push({type:"item",element:c})}),yield*l}}}};function Do(r){return r.hasChildItems!=null?r.hasChildItems:!!(r.childItems||r.title&&z.Children.count(r.children)>0)}let _o=Ss;class Mo{build(e,t){return this.context=t,ar(()=>this.iterateCollection(e))}*iterateCollection(e){let{children:t,items:s}=e;if(typeof t=="function"){if(!s)throw new Error("props.children was a function but props.items is missing");for(let n of e.items)yield*this.getFullNode({value:n},{renderer:t})}else{let n=[];z.Children.forEach(t,i=>{n.push(i)});let o=0;for(let i of n){let a=this.getFullNode({element:i,index:o},{});for(let l of a)o++,yield l}}}getKey(e,t,s,n){if(e.key!=null)return e.key;if(t.type==="cell"&&t.key!=null)return`${n}${t.key}`;let o=t.value;if(o!=null){var i;let a=(i=o.key)!==null&&i!==void 0?i:o.id;if(a==null)throw new Error("No key found for item");return a}return n?`${n}.${t.index}`:`$.${t.index}`}getChildState(e,t){return{renderer:t.renderer||e.renderer}}*getFullNode(e,t,s,n){let o=e.element;if(!o&&e.value&&t&&t.renderer){let l=this.cache.get(e.value);if(l&&(!l.shouldInvalidate||!l.shouldInvalidate(this.context))){l.index=e.index,l.parentKey=n?n.key:null,yield l;return}o=t.renderer(e.value)}if(z.isValidElement(o)){let l=o.type;if(typeof l!="function"&&typeof l.getCollectionNode!="function"){let h=typeof o.type=="function"?o.type.name:o.type;throw new Error(`Unknown element <${h}> in collection.`)}let c=l.getCollectionNode(o.props,this.context),u=e.index,m=c.next();for(;!m.done&&m.value;){let h=m.value;e.index=u;let p=h.key;p||(p=h.element?null:this.getKey(o,e,t,s));let x=[...this.getFullNode({...h,key:p,index:u,wrapper:Fo(e.wrapper,h.wrapper)},this.getChildState(t,h),s?`${s}${o.key}`:o.key,n)];for(let w of x){if(w.value=h.value||e.value,w.value&&this.cache.set(w.value,w),e.type&&w.type!==e.type)throw new Error(`Unsupported type <${st(w.type)}> in <${st(n.type)}>. Only <${st(e.type)}> is supported.`);u++,yield w}m=c.next(x)}return}if(e.key==null)return;let i=this,a={type:e.type,props:e.props,key:e.key,parentKey:n?n.key:null,value:e.value,level:n?n.level+1:0,index:e.index,rendered:e.rendered,textValue:e.textValue,"aria-label":e["aria-label"],wrapper:e.wrapper,shouldInvalidate:e.shouldInvalidate,hasChildNodes:e.hasChildNodes,childNodes:ar(function*(){if(!e.hasChildNodes)return;let l=0;for(let c of e.childNodes()){c.key!=null&&(c.key=`${a.key}${c.key}`),c.index=l;let u=i.getFullNode(c,i.getChildState(t,c),a.key,a);for(let m of u)l++,yield m}})};yield a}constructor(){this.cache=new WeakMap}}function ar(r){let e=[],t=null;return{*[Symbol.iterator](){for(let s of e)yield s;t||(t=r());for(let s of t)e.push(s),yield s}}}function Fo(r,e){if(r&&e)return t=>r(e(t));if(r)return r;if(e)return e}function st(r){return r[0].toUpperCase()+r.slice(1)}function jo(r,e,t){let s=f.useMemo(()=>new Mo,[]),{children:n,items:o,collection:i}=r;return f.useMemo(()=>{if(i)return i;let l=s.build({children:n,items:o},t);return e(l)},[s,n,o,i,t,e])}function Uo(r,e){return typeof e.getChildren=="function"?e.getChildren(r.key):r.childNodes}const lr=new WeakMap;function Wo(r){let e=lr.get(r);if(e!=null)return e;e=0;let t=s=>{for(let n of s)n.type==="section"?t(Uo(n,r)):e++};return t(r),lr.set(r,e),e}function zo(r){let e=wt(r,{enabled:typeof r.elementType=="string"}),t;return r.orientation==="vertical"&&(t="vertical"),r.elementType!=="hr"?{separatorProps:{...e,role:"separator","aria-orientation":t}}:{separatorProps:e}}function Ho(r){const{as:e,className:t,orientation:s,...n}=r;let o=e||"hr";o==="hr"&&s==="vertical"&&(o="div");const{separatorProps:i}=zo({elementType:typeof o=="string"?o:"hr",orientation:s}),a=f.useMemo(()=>xo({orientation:s,className:t}),[s,t]),l=f.useCallback((c={})=>({className:a,role:"separator","data-orientation":s,...i,...n,...c}),[a,s,i,n]);return{Component:o,getDividerProps:l}}var Es=ae((r,e)=>{const{Component:t,getDividerProps:s}=Ho({...r});return d.jsx(t,{ref:e,...s()})});Es.displayName="NextUI.Divider";var Vo=Es;function cr(r,e=[]){const t=f.useRef(r);return En(()=>{t.current=r}),f.useCallback((...s)=>{var n;return(n=t.current)==null?void 0:n.call(t,...s)},e)}function qo(r){let[e,t]=Ir(r.isOpen,r.defaultOpen||!1,r.onOpenChange);const s=f.useCallback(()=>{t(!0)},[t]),n=f.useCallback(()=>{t(!1)},[t]),o=f.useCallback(()=>{t(!e)},[t,e]);return{isOpen:e,setOpen:t,open:s,close:n,toggle:o}}function dt(){return dt=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)({}).hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},dt.apply(null,arguments)}function Yo(r,e){if(r==null)return{};var t={};for(var s in r)if({}.hasOwnProperty.call(r,s)){if(e.includes(s))continue;t[s]=r[s]}return t}var Jo=f.useLayoutEffect,Go=function(e){var t=f.useRef(e);return Jo(function(){t.current=e}),t},ur=function(e,t){if(typeof e=="function"){e(t);return}e.current=t},Xo=function(e,t){var s=f.useRef();return f.useCallback(function(n){e.current=n,s.current&&ur(s.current,null),s.current=t,t&&ur(t,n)},[t])},dr={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Qo=function(e){Object.keys(dr).forEach(function(t){e.style.setProperty(t,dr[t],"important")})},fr=Qo,q=null,hr=function(e,t){var s=e.scrollHeight;return t.sizingStyle.boxSizing==="border-box"?s+t.borderSize:s-t.paddingSize};function Zo(r,e,t,s){t===void 0&&(t=1),s===void 0&&(s=1/0),q||(q=document.createElement("textarea"),q.setAttribute("tabindex","-1"),q.setAttribute("aria-hidden","true"),fr(q)),q.parentNode===null&&document.body.appendChild(q);var n=r.paddingSize,o=r.borderSize,i=r.sizingStyle,a=i.boxSizing;Object.keys(i).forEach(function(h){var p=h;q.style[p]=i[p]}),fr(q),q.value=e;var l=hr(q,r);q.value=e,l=hr(q,r),q.value="x";var c=q.scrollHeight-n,u=c*t;a==="border-box"&&(u=u+n+o),l=Math.max(u,l);var m=c*s;return a==="border-box"&&(m=m+n+o),l=Math.min(m,l),[l,c]}var pr=function(){},ei=function(e,t){return e.reduce(function(s,n){return s[n]=t[n],s},{})},ti=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],ri=!!document.documentElement.currentStyle,si=function(e){var t=window.getComputedStyle(e);if(t===null)return null;var s=ei(ti,t),n=s.boxSizing;if(n==="")return null;ri&&n==="border-box"&&(s.width=parseFloat(s.width)+parseFloat(s.borderRightWidth)+parseFloat(s.borderLeftWidth)+parseFloat(s.paddingRight)+parseFloat(s.paddingLeft)+"px");var o=parseFloat(s.paddingBottom)+parseFloat(s.paddingTop),i=parseFloat(s.borderBottomWidth)+parseFloat(s.borderTopWidth);return{sizingStyle:s,paddingSize:o,borderSize:i}},ni=si;function Cs(r,e,t){var s=Go(t);f.useLayoutEffect(function(){var n=function(i){return s.current(i)};if(r)return r.addEventListener(e,n),function(){return r.removeEventListener(e,n)}},[])}var oi=function(e){Cs(window,"resize",e)},ii=function(e){Cs(document.fonts,"loadingdone",e)},ai=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],li=function(e,t){var s=e.cacheMeasurements,n=e.maxRows,o=e.minRows,i=e.onChange,a=i===void 0?pr:i,l=e.onHeightChange,c=l===void 0?pr:l,u=Yo(e,ai),m=u.value!==void 0,h=f.useRef(null),p=Xo(h,t),b=f.useRef(0),x=f.useRef(),w=function(){var $=h.current,C=s&&x.current?x.current:ni($);if(C){x.current=C;var T=Zo(C,$.value||$.placeholder||"x",o,n),P=T[0],A=T[1];b.current!==P&&(b.current=P,$.style.setProperty("height",P+"px","important"),c(P,{rowHeight:A}))}},S=function($){m||w(),a($)};return f.useLayoutEffect(w),oi(w),ii(w),f.createElement("textarea",dt({},u,{onChange:S,ref:p}))},ci=f.forwardRef(li),ks=ae(({style:r,minRows:e=3,maxRows:t=8,cacheMeasurements:s=!1,disableAutosize:n=!1,onHeightChange:o,...i},a)=>{const{Component:l,label:c,description:u,startContent:m,endContent:h,hasHelper:p,shouldLabelBeOutside:b,shouldLabelBeInside:x,isInvalid:w,errorMessage:S,getBaseProps:g,getLabelProps:$,getInputProps:C,getInnerWrapperProps:T,getInputWrapperProps:P,getHelperWrapperProps:A,getDescriptionProps:O,getErrorMessageProps:L}=Cn({...i,ref:a,isMultiline:!0}),[y,R]=f.useState(e>1),[E,N]=f.useState(!1),B=c?d.jsx("label",{...$(),children:c}):null,D=C(),M=(ee,k)=>{if(e===1&&R(ee>=k.rowHeight*2),t>e){const Y=ee>=t*k.rowHeight;N(Y)}o==null||o(ee,k)},v=n?d.jsx("textarea",{...D,style:j(D.style,r??{})}):d.jsx(ci,{...D,cacheMeasurements:s,"data-hide-scroll":H(!E),maxRows:t,minRows:e,style:j(D.style,r??{}),onHeightChange:M}),_=f.useMemo(()=>m||h?d.jsxs("div",{...T(),children:[m,v,h]}):d.jsx("div",{...T(),children:v}),[m,D,h,T]);return d.jsxs(l,{...g(),children:[b?B:null,d.jsxs("div",{...P(),"data-has-multiple-rows":H(y),children:[x?B:null,_]}),p?d.jsx("div",{...A(),children:w&&S?d.jsx("div",{...L(),children:S}):u?d.jsx("div",{...O(),children:u}):null}):null]})});ks.displayName="NextUI.Textarea";var ui=ks;function di(r,e){let{role:t="dialog"}=r,s=lt();s=r["aria-label"]?void 0:s;let n=f.useRef(!1);return f.useEffect(()=>{if(e.current&&!e.current.contains(document.activeElement)){$e(e.current);let o=setTimeout(()=>{document.activeElement===e.current&&(n.current=!0,e.current&&(e.current.blur(),$e(e.current)),n.current=!1)},500);return()=>{clearTimeout(o)}}},[e]),$s(),{dialogProps:{...$t(r,{labelable:!0}),role:t,tabIndex:-1,"aria-labelledby":r["aria-labelledby"]||s,onBlur:o=>{n.current&&o.stopPropagation()}},titleProps:{id:s}}}var fi=700;function hi(){return kr()||typeof window>"u"?!1:window.screen.width<=fi}var[pi,qe]=fn({name:"ModalContext",errorMessage:"useModalContext: `context` is undefined. Seems you forgot to wrap all popover components within `<Modal />`"}),Ps=ae((r,e)=>{const{as:t,children:s,className:n,...o}=r,{slots:i,classNames:a,bodyId:l,setBodyMounted:c}=qe(),u=Oe(e),m=t||"div";return f.useEffect(()=>(c(!0),()=>c(!1)),[c]),d.jsx(m,{ref:u,className:i.body({class:oe(a==null?void 0:a.body,n)}),id:l,...o,children:s})});Ps.displayName="NextUI.ModalBody";var kt=Ps,mi={enter:{scale:"var(--scale-enter)",y:"var(--slide-enter)",opacity:1,transition:{scale:{duration:.4,ease:de.ease},opacity:{duration:.4,ease:de.ease},y:{type:"spring",bounce:0,duration:.6}}},exit:{scale:"var(--scale-exit)",y:"var(--slide-exit)",opacity:0,transition:{duration:.3,ease:de.ease}}},Ns=ae((r,e)=>{const{as:t,children:s,role:n="dialog",...o}=r,{Component:i,domRef:a,slots:l,classNames:c,motionProps:u,backdrop:m,closeButton:h,hideCloseButton:p,disableAnimation:b,getDialogProps:x,getBackdropProps:w,getCloseButtonProps:S,onClose:g}=qe(),$=t||i||"div",{dialogProps:C}=di({role:n},a),T=f.isValidElement(h)?f.cloneElement(h,S()):d.jsx("button",{...S(),children:d.jsx(No,{})}),P=f.useCallback(R=>{R.key==="Tab"&&R.nativeEvent.isComposing&&(R.stopPropagation(),R.preventDefault())},[]),A=x(j(C,o)),O=d.jsxs($,{...A,onKeyDown:Se(A.onKeyDown,P),children:[d.jsx(er,{onDismiss:g}),!p&&T,typeof s=="function"?s(g):s,d.jsx(er,{onDismiss:g})]}),L=f.useMemo(()=>m==="transparent"?null:b?d.jsx("div",{...w()}):d.jsx(jt,{features:Ut,children:d.jsx(Wt.div,{animate:"enter",exit:"exit",initial:"exit",variants:To.fade,...w()})}),[m,b,w]),y=b?d.jsx("div",{className:l.wrapper({class:c==null?void 0:c.wrapper}),"data-slot":"wrapper",children:O}):d.jsx(jt,{features:Ut,children:d.jsx(Wt.div,{animate:"enter",className:l.wrapper({class:c==null?void 0:c.wrapper}),"data-slot":"wrapper",exit:"exit",initial:"exit",variants:mi,...u,children:O})});return d.jsxs("div",{tabIndex:-1,children:[L,y]})});Ns.displayName="NextUI.ModalContent";var Pt=Ns,Ts=ae((r,e)=>{const{as:t,children:s,className:n,...o}=r,{slots:i,classNames:a}=qe(),l=Oe(e),c=t||"footer";return d.jsx(c,{ref:l,className:i.footer({class:oe(a==null?void 0:a.footer,n)}),...o,children:s})});Ts.displayName="NextUI.ModalFooter";var Nt=Ts,Rs=ae((r,e)=>{const{as:t,children:s,className:n,...o}=r,{slots:i,classNames:a,headerId:l,setHeaderMounted:c}=qe(),u=Oe(e),m=t||"header";return f.useEffect(()=>(c(!0),()=>c(!1)),[c]),d.jsx(m,{ref:u,className:i.header({class:oe(a==null?void 0:a.header,n)}),id:l,...o,children:s})});Rs.displayName="NextUI.ModalHeader";var Tt=Rs;function bi(r={shouldBlockScroll:!0},e,t){let{overlayProps:s,underlayProps:n}=oo({...r,isOpen:e.isOpen,onClose:e.close},t);return ao({isDisabled:!e.isOpen||!r.shouldBlockScroll}),$s(),f.useEffect(()=>{if(e.isOpen&&t.current)return po([t.current])},[e.isOpen,t]),{modalProps:j(s),underlayProps:n}}function gi(r){var e,t,s;const n=St(),[o,i]=Rr(r,rr.variantKeys),{ref:a,as:l,className:c,classNames:u,isOpen:m,defaultOpen:h,onOpenChange:p,motionProps:b,closeButton:x,isDismissable:w=!0,hideCloseButton:S=!1,shouldBlockScroll:g=!0,portalContainer:$,isKeyboardDismissDisabled:C=!1,onClose:T,...P}=o,A=l||"section",O=Oe(a),L=f.useRef(null),[y,R]=f.useState(!1),[E,N]=f.useState(!1),B=(t=(e=r.disableAnimation)!=null?e:n==null?void 0:n.disableAnimation)!=null?t:!1,D=f.useId(),M=f.useId(),v=f.useId(),_=qo({isOpen:m,defaultOpen:h,onOpenChange:ce=>{p==null||p(ce),ce||T==null||T()}}),{modalProps:ee,underlayProps:k}=bi({isDismissable:w,shouldBlockScroll:g,isKeyboardDismissDisabled:C},_,O),{buttonProps:Y}=hn({onPress:_.close},L),{isFocusVisible:G,focusProps:me}=Kr(),Je=oe(u==null?void 0:u.base,c),be=f.useMemo(()=>rr({...i,disableAnimation:B}),[Ar(i),B]),Ge=(ce={},Xe=null)=>({ref:Dn(Xe,O),...j(ee,P,ce),className:be.base({class:oe(Je,ce.className)}),id:D,"data-open":H(_.isOpen),"data-dismissable":H(w),"aria-modal":H(!0),"aria-labelledby":y?M:void 0,"aria-describedby":E?v:void 0}),Ce=f.useCallback((ce={})=>({className:be.backdrop({class:u==null?void 0:u.backdrop}),onClick:()=>_.close(),...k,...ce}),[be,u,k]),le=()=>({role:"button",tabIndex:0,"aria-label":"Close","data-focus-visible":H(G),className:be.closeButton({class:u==null?void 0:u.closeButton}),...j(Y,me)});return{Component:A,slots:be,domRef:O,headerId:M,bodyId:v,motionProps:b,classNames:u,isDismissable:w,closeButton:x,hideCloseButton:S,portalContainer:$,shouldBlockScroll:g,backdrop:(s=r.backdrop)!=null?s:"opaque",isOpen:_.isOpen,onClose:_.close,disableAnimation:B,setBodyMounted:N,setHeaderMounted:R,getDialogProps:Ge,getBackdropProps:Ce,getCloseButtonProps:le}}var Ks=ae((r,e)=>{const{children:t,...s}=r,n=gi({...s,ref:e}),o=d.jsx(go,{portalContainer:n.portalContainer,children:t});return d.jsx(pi,{value:n,children:n.disableAnimation&&n.isOpen?o:d.jsx(pn,{children:n.isOpen?o:null})})});Ks.displayName="NextUI.Modal";var Rt=Ks;function nt(r={}){const{id:e,defaultOpen:t,isOpen:s,onClose:n,onOpen:o,onChange:i=()=>{}}=r,a=cr(o),l=cr(n),[c,u]=Ir(s,t||!1,i),m=f.useId(),h=e||m,p=s!==void 0,b=f.useCallback(()=>{p||u(!1),l==null||l()},[p,l]),x=f.useCallback(()=>{p||u(!0),a==null||a()},[p,a]),w=f.useCallback(()=>{(c?b:x)()},[c,x,b]);return{isOpen:!!c,onOpen:x,onClose:b,onOpenChange:w,isControlled:p,getButtonProps:(S={})=>({...S,"aria-expanded":c,"aria-controls":h,onClick:Se(S.onClick,w)}),getDisclosureProps:(S={})=>({...S,hidden:!c,id:h})}}class mr{*[Symbol.iterator](){yield*this.iterable}get size(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}getKeyBefore(e){let t=this.keyMap.get(e);return t?t.prevKey:null}getKeyAfter(e){let t=this.keyMap.get(e);return t?t.nextKey:null}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(e){return this.keyMap.get(e)}at(e){const t=[...this.getKeys()];return this.getItem(t[e])}getChildren(e){let t=this.keyMap.get(e);return(t==null?void 0:t.childNodes)||[]}constructor(e){this.keyMap=new Map,this.iterable=e;let t=o=>{if(this.keyMap.set(o.key,o),o.childNodes&&o.type==="section")for(let i of o.childNodes)t(i)};for(let o of e)t(o);let s,n=0;for(let[o,i]of this.keyMap)s?(s.nextKey=o,i.prevKey=s.key):(this.firstKey=o,i.prevKey=void 0),i.type==="item"&&(i.index=n++),s=i,s.nextKey=void 0;this.lastKey=s==null?void 0:s.key}}function yi(r){let{filter:e}=r,t=Ao(r),s=f.useMemo(()=>r.disabledKeys?new Set(r.disabledKeys):new Set,[r.disabledKeys]),n=f.useCallback(c=>e?new mr(e(c)):new mr(c),[e]),o=f.useMemo(()=>({suppressTextValueWarning:r.suppressTextValueWarning}),[r.suppressTextValueWarning]),i=jo(r,n,o),a=f.useMemo(()=>new Bo(i,t),[i,t]);const l=f.useRef(null);return f.useEffect(()=>{if(t.focusedKey!=null&&!i.getItem(t.focusedKey)){const c=l.current.getItem(t.focusedKey),u=[...l.current.getKeys()].map(x=>{const w=l.current.getItem(x);return w.type==="item"?w:null}).filter(x=>x!==null),m=[...i.getKeys()].map(x=>{const w=i.getItem(x);return w.type==="item"?w:null}).filter(x=>x!==null),h=u.length-m.length;let p=Math.min(h>1?Math.max(c.index-h+1,0):c.index,m.length-1),b;for(;p>=0;){if(!a.isDisabled(m[p].key)){b=m[p];break}p<m.length-1?p++:(p>c.index&&(p=c.index),p--)}t.setFocusedKey(b?b.key:null)}l.current=i},[i,a,t,t.focusedKey]),{collection:i,disabledKeys:s,selectionManager:a}}function vi(r){const{isSelected:e,disableAnimation:t,...s}=r;return d.jsx("svg",{"aria-hidden":"true","data-selected":e,role:"presentation",viewBox:"0 0 17 18",...s,children:d.jsx("polyline",{fill:"none",points:"1 9 7 14 15 4",stroke:"currentColor",strokeDasharray:22,strokeDashoffset:e?44:66,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,style:t?{}:{transition:"stroke-dashoffset 200ms ease"}})})}const Kt=new WeakMap;function xi(r){return typeof r=="string"?r.replace(/\s*/g,""):""+r}function wi(r,e){let t=Kt.get(r);if(!t)throw new Error("Unknown list");return`${t.id}-option-${xi(e)}`}function $i(r,e,t){let s=$t(r,{labelable:!0}),n=r.selectionBehavior||"toggle",o=r.linkBehavior||(n==="replace"?"action":"override");n==="toggle"&&o==="action"&&(o="override");let{listProps:i}=Po({...r,ref:t,selectionManager:e.selectionManager,collection:e.collection,disabledKeys:e.disabledKeys,linkBehavior:o}),{focusWithinProps:a}=xt({onFocusWithin:r.onFocus,onBlurWithin:r.onBlur,onFocusWithinChange:r.onFocusChange}),l=Or(r.id);Kt.set(e,{id:l,shouldUseVirtualFocus:r.shouldUseVirtualFocus,shouldSelectOnPressUp:r.shouldSelectOnPressUp,shouldFocusOnHover:r.shouldFocusOnHover,isVirtualized:r.isVirtualized,onAction:r.onAction,linkBehavior:o});let{labelProps:c,fieldProps:u}=kn({...r,id:l,labelElementType:"span"});return{labelProps:c,listBoxProps:j(s,a,e.selectionManager.selectionMode==="multiple"?{"aria-multiselectable":"true"}:{},{role:"listbox",...j(u,i)})}}function Si(r,e,t){var s,n;let{key:o}=r,i=Kt.get(e);var a;let l=(a=r.isDisabled)!==null&&a!==void 0?a:e.selectionManager.isDisabled(o);var c;let u=(c=r.isSelected)!==null&&c!==void 0?c:e.selectionManager.isSelected(o);var m;let h=(m=r.shouldSelectOnPressUp)!==null&&m!==void 0?m:i==null?void 0:i.shouldSelectOnPressUp;var p;let b=(p=r.shouldFocusOnHover)!==null&&p!==void 0?p:i==null?void 0:i.shouldFocusOnHover;var x;let w=(x=r.shouldUseVirtualFocus)!==null&&x!==void 0?x:i==null?void 0:i.shouldUseVirtualFocus;var S;let g=(S=r.isVirtualized)!==null&&S!==void 0?S:i==null?void 0:i.isVirtualized,$=lt(),C=lt(),T={role:"option","aria-disabled":l||void 0,"aria-selected":e.selectionManager.selectionMode!=="none"?u:void 0};Nr()&&mn()||(T["aria-label"]=r["aria-label"],T["aria-labelledby"]=$,T["aria-describedby"]=C);let P=e.collection.getItem(o);if(g){let M=Number(P==null?void 0:P.index);T["aria-posinset"]=Number.isNaN(M)?void 0:M+1,T["aria-setsize"]=Wo(e.collection)}let A=i!=null&&i.onAction?()=>{var M;return i==null||(M=i.onAction)===null||M===void 0?void 0:M.call(i,o)}:void 0,{itemProps:O,isPressed:L,isFocused:y,hasAction:R,allowsSelection:E}=Co({selectionManager:e.selectionManager,key:o,ref:t,shouldSelectOnPressUp:h,allowsDifferentPressOrigin:h&&b,isVirtualized:g,shouldUseVirtualFocus:w,isDisabled:l,onAction:A||!(P==null||(s=P.props)===null||s===void 0)&&s.onAction?Se(P==null||(n=P.props)===null||n===void 0?void 0:n.onAction,A):void 0,linkBehavior:i==null?void 0:i.linkBehavior}),{hoverProps:N}=Lr({isDisabled:l||!b,onHoverStart(){zt()||(e.selectionManager.setFocused(!0),e.selectionManager.setFocusedKey(o))}}),B=$t(P==null?void 0:P.props);delete B.id;let D=bn(P==null?void 0:P.props);return{optionProps:{...T,...j(B,O,N,D),id:wi(e,o)},labelProps:{id:$},descriptionProps:{id:C},isFocused:y,isFocusVisible:y&&zt(),isSelected:u,isDisabled:l,isPressed:L,allowsSelection:E,hasAction:R}}function Ei(r){let{heading:e,"aria-label":t}=r,s=Or();return{itemProps:{role:"presentation"},headingProps:e?{id:s,role:"presentation"}:{},groupProps:{role:"group","aria-label":t,"aria-labelledby":e?s:void 0}}}function Ci(r){var e,t;const s=St(),[n,o]=Rr(r,tr.variantKeys),{as:i,item:a,state:l,description:c,startContent:u,endContent:m,isVirtualized:h,selectedIcon:p,className:b,classNames:x,autoFocus:w,onPress:S,onClick:g,shouldHighlightOnFocus:$,hideSelectedIcon:C=!1,isReadOnly:T=!1,...P}=n,A=(t=(e=r.disableAnimation)!=null?e:s==null?void 0:s.disableAnimation)!=null?t:!1,O=f.useRef(null),L=i||(r.href?"a":"li"),y=typeof L=="string",{rendered:R,key:E}=a,N=l.disabledKeys.has(E)||r.isDisabled,B=l.selectionManager.selectionMode!=="none",D=hi(),{pressProps:M,isPressed:v}=vt({ref:O,isDisabled:N,onPress:S}),{isHovered:_,hoverProps:ee}=Lr({isDisabled:N}),{isFocusVisible:k,focusProps:Y}=Kr({autoFocus:w}),{isFocused:G,isSelected:me,optionProps:Je,labelProps:be,descriptionProps:Ge}=Si({key:E,isDisabled:N,"aria-label":n["aria-label"],isVirtualized:h},l,O);let Ce=Je;const le=f.useMemo(()=>tr({...o,isDisabled:N,disableAnimation:A}),[Ar(o),N,A]),ce=oe(x==null?void 0:x.base,b);T&&(Ce=gn(Ce));const Xe=f.useMemo(()=>$&&G?!0:D?_||v:_,[_,v,G,D,$]),Gs=(se={})=>({ref:O,...j({onClick:g},Ce,T?{}:j(Y,M),ee,wt(P,{enabled:y}),se),"data-selectable":H(B),"data-focus":H(G),"data-hover":H(Xe),"data-disabled":H(N),"data-selected":H(me),"data-pressed":H(v),"data-focus-visible":H(k),className:le.base({class:oe(ce,se.className)})}),Xs=(se={})=>({...j(be,se),"data-label":H(!0),className:le.title({class:x==null?void 0:x.title})}),Qs=(se={})=>({...j(Ge,se),className:le.description({class:x==null?void 0:x.description})}),Zs=(se={})=>({...j(se),className:le.wrapper({class:x==null?void 0:x.wrapper})}),en=f.useCallback((se={})=>({"aria-hidden":H(!0),"data-disabled":H(N),className:le.selectedIcon({class:x==null?void 0:x.selectedIcon}),...se}),[N,le,x]);return{Component:L,domRef:O,slots:le,classNames:x,isSelectable:B,isSelected:me,isDisabled:N,rendered:R,description:c,startContent:u,endContent:m,selectedIcon:p,hideSelectedIcon:C,disableAnimation:A,getItemProps:Gs,getLabelProps:Xs,getWrapperProps:Zs,getDescriptionProps:Qs,getSelectedIconProps:en}}var As=ae((r,e)=>{const{Component:t,rendered:s,description:n,isSelectable:o,isSelected:i,isDisabled:a,selectedIcon:l,startContent:c,endContent:u,hideSelectedIcon:m,disableAnimation:h,getItemProps:p,getLabelProps:b,getWrapperProps:x,getDescriptionProps:w,getSelectedIconProps:S}=Ci(r),g=f.useMemo(()=>{const $=d.jsx(vi,{disableAnimation:h,isSelected:i});return typeof l=="function"?l({icon:$,isSelected:i,isDisabled:a}):l||$},[l,i,a,h]);return d.jsxs(t,{...p(),children:[c,n?d.jsxs("div",{...x(),children:[d.jsx("span",{...b(),children:s}),d.jsx("span",{...w(),children:n})]}):d.jsx("span",{...b(),children:s}),o&&!m&&d.jsx("span",{...S(),children:g}),u]})});As.displayName="NextUI.ListboxItem";var Os=As,Ls=ae(({item:r,state:e,as:t,variant:s,color:n,disableAnimation:o,className:i,classNames:a,hideSelectedIcon:l,showDivider:c=!1,dividerProps:u={},itemClasses:m,title:h,...p},b)=>{const x=t||"li",w=f.useMemo(()=>vo(),[]),S=oe(a==null?void 0:a.base,i),g=oe(a==null?void 0:a.divider,u==null?void 0:u.className),{itemProps:$,headingProps:C,groupProps:T}=Ei({heading:r.rendered,"aria-label":r["aria-label"]});return d.jsxs(x,{"data-slot":"base",...j($,p),className:w.base({class:S}),children:[r.rendered&&d.jsx("span",{...C,className:w.heading({class:a==null?void 0:a.heading}),"data-slot":"heading",children:r.rendered}),d.jsxs("ul",{...T,className:w.group({class:a==null?void 0:a.group}),"data-has-title":!!r.rendered,"data-slot":"group",children:[[...r.childNodes].map(P=>{const{key:A,props:O}=P;let L=d.jsx(Os,{classNames:m,color:n,disableAnimation:o,hideSelectedIcon:l,item:P,state:e,variant:s,...O},A);return P.wrapper&&(L=P.wrapper(L)),L}),c&&d.jsx(Vo,{as:"li",className:w.divider({class:g}),...u})]})]},r.key)});Ls.displayName="NextUI.ListboxSection";var ki=Ls;function Pi(r){var e;const t=St(),{ref:s,as:n,state:o,variant:i,color:a,onAction:l,children:c,onSelectionChange:u,disableAnimation:m=(e=t==null?void 0:t.disableAnimation)!=null?e:!1,itemClasses:h,className:p,topContent:b,bottomContent:x,emptyContent:w="No items.",hideSelectedIcon:S=!1,hideEmptyContent:g=!1,shouldHighlightOnFocus:$=!1,classNames:C,...T}=r,P=n||"ul",A=typeof P=="string",O=Oe(s),L=yi({...r,children:c,onSelectionChange:u}),y=o||L,{listBoxProps:R}=$i({...r,onAction:l},y,O),E=f.useMemo(()=>yo({className:p}),[p]),N=oe(C==null?void 0:C.base,p);return{Component:P,state:y,variant:i,color:a,slots:E,classNames:C,topContent:b,bottomContent:x,emptyContent:w,hideEmptyContent:g,shouldHighlightOnFocus:$,hideSelectedIcon:S,disableAnimation:m,className:p,itemClasses:h,getBaseProps:(v={})=>({ref:O,"data-slot":"base",className:E.base({class:N}),...wt(T,{enabled:A}),...v}),getListProps:(v={})=>({"data-slot":"list",className:E.list({class:C==null?void 0:C.list}),...R,...v}),getEmptyContentProps:(v={})=>({"data-slot":"empty-content",children:w,className:E.emptyContent({class:C==null?void 0:C.emptyContent}),...v})}}function Is(r,e){const{Component:t,state:s,color:n,variant:o,itemClasses:i,getBaseProps:a,topContent:l,bottomContent:c,hideEmptyContent:u,hideSelectedIcon:m,shouldHighlightOnFocus:h,disableAnimation:p,getEmptyContentProps:b,getListProps:x}=Pi({...r,ref:e}),w=d.jsxs(t,{...x(),children:[!s.collection.size&&!u&&d.jsx("li",{children:d.jsx("div",{...b()})}),[...s.collection].map(S=>{var g;const $={color:n,item:S,state:s,variant:o,disableAnimation:p,hideSelectedIcon:m,...S.props};if(S.type==="section")return d.jsx(ki,{...$,itemClasses:i},S.key);let C=d.jsx(Os,{...$,classNames:j(i,(g=S.props)==null?void 0:g.classNames),shouldHighlightOnFocus:h},S.key);return S.wrapper&&(C=S.wrapper(C)),C})]});return d.jsxs("div",{...a(),children:[l,w,c]})}Is.displayName="NextUI.Listbox";var Ni=ae(Is),Ti=_o,Ri=Ti;const Ki=r=>d.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[d.jsx("circle",{cx:"12",cy:"12",r:"10"})," ",d.jsx("polyline",{points:"12 8 8 12 12 16"})," ",d.jsx("line",{x1:"16",y1:"12",x2:"8",y2:"12"})]}),Ai=r=>d.jsx("svg",{fill:"none",width:24,height:24,viewBox:"0 0 24 24",stroke:"currentColor",...r,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),Oi=r=>d.jsxs("svg",{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[" ",d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"})," ",d.jsx("path",{d:"M3 20l1.3 -3.9a9 8 0 1 1 3.4 2.9l-4.7 1"})," ",d.jsx("line",{x1:"12",y1:"12",x2:"12",y2:"12.01"})," ",d.jsx("line",{x1:"8",y1:"12",x2:"8",y2:"12.01"})," ",d.jsx("line",{x1:"16",y1:"12",x2:"16",y2:"12.01"})]}),Li=r=>d.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[" ",d.jsx("circle",{cx:"12",cy:"12",r:"10"})," ",d.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"16"})," ",d.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}),Ii=r=>d.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[" ",d.jsx("circle",{cx:"12",cy:"12",r:"10"})," ",d.jsx("polyline",{points:"12 16 16 12 12 8"})," ",d.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}),Bi=r=>d.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[d.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"})," ",d.jsx("line",{x1:"4",y1:"7",x2:"20",y2:"7"})," ",d.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"})," ",d.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})," ",d.jsx("path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"})," ",d.jsx("path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"})]}),ie=Object.create(null);ie.open="0";ie.close="1";ie.ping="2";ie.pong="3";ie.message="4";ie.upgrade="5";ie.noop="6";const Fe=Object.create(null);Object.keys(ie).forEach(r=>{Fe[ie[r]]=r});const ft={type:"error",data:"parser error"},Bs=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Ds=typeof ArrayBuffer=="function",_s=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer,At=({type:r,data:e},t,s)=>Bs&&e instanceof Blob?t?s(e):br(e,s):Ds&&(e instanceof ArrayBuffer||_s(e))?t?s(e):br(new Blob([e]),s):s(ie[r]+(e||"")),br=(r,e)=>{const t=new FileReader;return t.onload=function(){const s=t.result.split(",")[1];e("b"+(s||""))},t.readAsDataURL(r)};function gr(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}let ot;function Di(r,e){if(Bs&&r.data instanceof Blob)return r.data.arrayBuffer().then(gr).then(e);if(Ds&&(r.data instanceof ArrayBuffer||_s(r.data)))return e(gr(r.data));At(r,!1,t=>{ot||(ot=new TextEncoder),e(ot.encode(t))})}const yr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Re=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let r=0;r<yr.length;r++)Re[yr.charCodeAt(r)]=r;const _i=r=>{let e=r.length*.75,t=r.length,s,n=0,o,i,a,l;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);const c=new ArrayBuffer(e),u=new Uint8Array(c);for(s=0;s<t;s+=4)o=Re[r.charCodeAt(s)],i=Re[r.charCodeAt(s+1)],a=Re[r.charCodeAt(s+2)],l=Re[r.charCodeAt(s+3)],u[n++]=o<<2|i>>4,u[n++]=(i&15)<<4|a>>2,u[n++]=(a&3)<<6|l&63;return c},Mi=typeof ArrayBuffer=="function",Ot=(r,e)=>{if(typeof r!="string")return{type:"message",data:Ms(r,e)};const t=r.charAt(0);return t==="b"?{type:"message",data:Fi(r.substring(1),e)}:Fe[t]?r.length>1?{type:Fe[t],data:r.substring(1)}:{type:Fe[t]}:ft},Fi=(r,e)=>{if(Mi){const t=_i(r);return Ms(t,e)}else return{base64:!0,data:r}},Ms=(r,e)=>{switch(e){case"blob":return r instanceof Blob?r:new Blob([r]);case"arraybuffer":default:return r instanceof ArrayBuffer?r:r.buffer}},Fs="",ji=(r,e)=>{const t=r.length,s=new Array(t);let n=0;r.forEach((o,i)=>{At(o,!1,a=>{s[i]=a,++n===t&&e(s.join(Fs))})})},Ui=(r,e)=>{const t=r.split(Fs),s=[];for(let n=0;n<t.length;n++){const o=Ot(t[n],e);if(s.push(o),o.type==="error")break}return s};function Wi(){return new TransformStream({transform(r,e){Di(r,t=>{const s=t.length;let n;if(s<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,s);else if(s<65536){n=new Uint8Array(3);const o=new DataView(n.buffer);o.setUint8(0,126),o.setUint16(1,s)}else{n=new Uint8Array(9);const o=new DataView(n.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(s))}r.data&&typeof r.data!="string"&&(n[0]|=128),e.enqueue(n),e.enqueue(t)})}})}let it;function Be(r){return r.reduce((e,t)=>e+t.length,0)}function De(r,e){if(r[0].length===e)return r.shift();const t=new Uint8Array(e);let s=0;for(let n=0;n<e;n++)t[n]=r[0][s++],s===r[0].length&&(r.shift(),s=0);return r.length&&s<r[0].length&&(r[0]=r[0].slice(s)),t}function zi(r,e){it||(it=new TextDecoder);const t=[];let s=0,n=-1,o=!1;return new TransformStream({transform(i,a){for(t.push(i);;){if(s===0){if(Be(t)<1)break;const l=De(t,1);o=(l[0]&128)===128,n=l[0]&127,n<126?s=3:n===126?s=1:s=2}else if(s===1){if(Be(t)<2)break;const l=De(t,2);n=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),s=3}else if(s===2){if(Be(t)<8)break;const l=De(t,8),c=new DataView(l.buffer,l.byteOffset,l.length),u=c.getUint32(0);if(u>Math.pow(2,21)-1){a.enqueue(ft);break}n=u*Math.pow(2,32)+c.getUint32(4),s=3}else{if(Be(t)<n)break;const l=De(t,n);a.enqueue(Ot(o?l:it.decode(l),e)),s=0}if(n===0||n>r){a.enqueue(ft);break}}}})}const js=4;function U(r){if(r)return Hi(r)}function Hi(r){for(var e in U.prototype)r[e]=U.prototype[e];return r}U.prototype.on=U.prototype.addEventListener=function(r,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(e),this};U.prototype.once=function(r,e){function t(){this.off(r,t),e.apply(this,arguments)}return t.fn=e,this.on(r,t),this};U.prototype.off=U.prototype.removeListener=U.prototype.removeAllListeners=U.prototype.removeEventListener=function(r,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+r];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var s,n=0;n<t.length;n++)if(s=t[n],s===e||s.fn===e){t.splice(n,1);break}return t.length===0&&delete this._callbacks["$"+r],this};U.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+r],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(t){t=t.slice(0);for(var s=0,n=t.length;s<n;++s)t[s].apply(this,e)}return this};U.prototype.emitReserved=U.prototype.emit;U.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]};U.prototype.hasListeners=function(r){return!!this.listeners(r).length};const Q=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function Us(r,...e){return e.reduce((t,s)=>(r.hasOwnProperty(s)&&(t[s]=r[s]),t),{})}const Vi=Q.setTimeout,qi=Q.clearTimeout;function Ye(r,e){e.useNativeTimers?(r.setTimeoutFn=Vi.bind(Q),r.clearTimeoutFn=qi.bind(Q)):(r.setTimeoutFn=Q.setTimeout.bind(Q),r.clearTimeoutFn=Q.clearTimeout.bind(Q))}const Yi=1.33;function Ji(r){return typeof r=="string"?Gi(r):Math.ceil((r.byteLength||r.size)*Yi)}function Gi(r){let e=0,t=0;for(let s=0,n=r.length;s<n;s++)e=r.charCodeAt(s),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(s++,t+=4);return t}function Xi(r){let e="";for(let t in r)r.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(r[t]));return e}function Qi(r){let e={},t=r.split("&");for(let s=0,n=t.length;s<n;s++){let o=t[s].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}class Zi extends Error{constructor(e,t,s){super(e),this.description=t,this.context=s,this.type="TransportError"}}class Lt extends U{constructor(e){super(),this.writable=!1,Ye(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,t,s){return super.emitReserved("error",new Zi(e,t,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=Ot(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=Xi(e);return t.length?"?"+t:""}}const Ws="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),ht=64,ea={};let vr=0,_e=0,xr;function wr(r){let e="";do e=Ws[r%ht]+e,r=Math.floor(r/ht);while(r>0);return e}function zs(){const r=wr(+new Date);return r!==xr?(vr=0,xr=r):r+"."+wr(vr++)}for(;_e<ht;_e++)ea[Ws[_e]]=_e;let Hs=!1;try{Hs=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const ta=Hs;function Vs(r){const e=r.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||ta))return new XMLHttpRequest}catch{}if(!e)try{return new Q[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function ra(){}const sa=function(){return new Vs({xdomain:!1}).responseType!=null}();class na extends Lt{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){const s=location.protocol==="https:";let n=location.port;n||(n=s?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||n!==e.port}const t=e&&e.forceBase64;this.supportsBinary=sa&&!t,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let s=0;this.polling&&(s++,this.once("pollComplete",function(){--s||t()})),this.writable||(s++,this.once("drain",function(){--s||t()}))}else t()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};Ui(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,ji(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=zs()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}request(e={}){return Object.assign(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new ne(this.uri(),e)}doWrite(e,t){const s=this.request({method:"POST",data:e});s.on("success",t),s.on("error",(n,o)=>{this.onError("xhr post error",n,o)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,s)=>{this.onError("xhr poll error",t,s)}),this.pollXhr=e}}class ne extends U{constructor(e,t){super(),Ye(this,t),this.opts=t,this.method=t.method||"GET",this.uri=e,this.data=t.data!==void 0?t.data:null,this.create()}create(){var e;const t=Us(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd;const s=this.xhr=new Vs(t);try{s.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let n in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(n)&&s.setRequestHeader(n,this.opts.extraHeaders[n])}}catch{}if(this.method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(e=this.opts.cookieJar)===null||e===void 0||e.addCookies(s),"withCredentials"in s&&(s.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(s.timeout=this.opts.requestTimeout),s.onreadystatechange=()=>{var n;s.readyState===3&&((n=this.opts.cookieJar)===null||n===void 0||n.parseCookies(s)),s.readyState===4&&(s.status===200||s.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof s.status=="number"?s.status:0)},0))},s.send(this.data)}catch(n){this.setTimeoutFn(()=>{this.onError(n)},0);return}typeof document<"u"&&(this.index=ne.requestsCount++,ne.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=ra,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete ne.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}ne.requestsCount=0;ne.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",$r);else if(typeof addEventListener=="function"){const r="onpagehide"in Q?"pagehide":"unload";addEventListener(r,$r,!1)}}function $r(){for(let r in ne.requests)ne.requests.hasOwnProperty(r)&&ne.requests[r].abort()}const It=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),Me=Q.WebSocket||Q.MozWebSocket,Sr=!0,oa="arraybuffer",Er=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class ia extends Lt{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),t=this.opts.protocols,s=Er?{}:Us(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=Sr&&!Er?t?new Me(e,t):new Me(e):new Me(e,t,s)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],n=t===e.length-1;At(s,this.supportsBinary,o=>{const i={};try{Sr&&this.ws.send(o)}catch{}n&&It(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=zs()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}check(){return!!Me}}class aa extends Lt{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(e=>{const t=zi(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=e.readable.pipeThrough(t).getReader(),n=Wi();n.readable.pipeTo(e.writable),this.writer=n.writable.getWriter();const o=()=>{s.read().then(({done:a,value:l})=>{a||(this.onPacket(l),o())}).catch(a=>{})};o();const i={type:"open"};this.query.sid&&(i.data=`{"sid":"${this.query.sid}"}`),this.writer.write(i).then(()=>this.onOpen())})}))}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],n=t===e.length-1;this.writer.write(s).then(()=>{n&&It(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this.transport)===null||e===void 0||e.close()}}const la={websocket:ia,webtransport:aa,polling:na},ca=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ua=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function pt(r){if(r.length>2e3)throw"URI too long";const e=r,t=r.indexOf("["),s=r.indexOf("]");t!=-1&&s!=-1&&(r=r.substring(0,t)+r.substring(t,s).replace(/:/g,";")+r.substring(s,r.length));let n=ca.exec(r||""),o={},i=14;for(;i--;)o[ua[i]]=n[i]||"";return t!=-1&&s!=-1&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=da(o,o.path),o.queryKey=fa(o,o.query),o}function da(r,e){const t=/\/{2,9}/g,s=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&s.splice(0,1),e.slice(-1)=="/"&&s.splice(s.length-1,1),s}function fa(r,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,n,o){n&&(t[n]=o)}),t}let qs=class xe extends U{constructor(e,t={}){super(),this.binaryType=oa,this.writeBuffer=[],e&&typeof e=="object"&&(t=e,e=null),e?(e=pt(e),t.hostname=e.host,t.secure=e.protocol==="https"||e.protocol==="wss",t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=pt(t.host).host),Ye(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=t.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Qi(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=js,t.transport=e,this.id&&(t.sid=this.id);const s=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new la[e](s)}open(){let e;if(this.opts.rememberUpgrade&&xe.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",t=>this.onClose("transport close",t))}probe(e){let t=this.createTransport(e),s=!1;xe.priorWebsocketSuccess=!1;const n=()=>{s||(t.send([{type:"ping",data:"probe"}]),t.once("packet",m=>{if(!s)if(m.type==="pong"&&m.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;xe.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(u(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=t.name,this.emitReserved("upgradeError",h)}}))};function o(){s||(s=!0,u(),t.close(),t=null)}const i=m=>{const h=new Error("probe error: "+m);h.transport=t.name,o(),this.emitReserved("upgradeError",h)};function a(){i("transport closed")}function l(){i("socket closed")}function c(m){t&&m.name!==t.name&&o()}const u=()=>{t.removeListener("open",n),t.removeListener("error",i),t.removeListener("close",a),this.off("close",l),this.off("upgrading",c)};t.once("open",n),t.once("error",i),t.once("close",a),this.once("close",l),this.once("upgrading",c),this.upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{s||t.open()},200):t.open()}onOpen(){if(this.readyState="open",xe.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let e=0;const t=this.upgrades.length;for(;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),this.resetPingTimeout(),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let s=0;s<this.writeBuffer.length;s++){const n=this.writeBuffer[s].data;if(n&&(t+=Ji(n)),s>0&&t>this.maxPayload)return this.writeBuffer.slice(0,s);t+=2}return this.writeBuffer}write(e,t,s){return this.sendPacket("message",e,t,s),this}send(e,t,s){return this.sendPacket("message",e,t,s),this}sendPacket(e,t,s,n){if(typeof t=="function"&&(n=t,t=void 0),typeof s=="function"&&(n=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const o={type:e,data:t,options:s};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),n&&this.once("flush",n),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},s=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():e()}):this.upgrading?s():e()),this}onError(e){xe.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,t){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const t=[];let s=0;const n=e.length;for(;s<n;s++)~this.transports.indexOf(e[s])&&t.push(e[s]);return t}};qs.protocol=js;function ha(r,e="",t){let s=r;t=t||typeof location<"u"&&location,r==null&&(r=t.protocol+"//"+t.host),typeof r=="string"&&(r.charAt(0)==="/"&&(r.charAt(1)==="/"?r=t.protocol+r:r=t.host+r),/^(https?|wss?):\/\//.test(r)||(typeof t<"u"?r=t.protocol+"//"+r:r="https://"+r),s=pt(r)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const o=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+o+":"+s.port+e,s.href=s.protocol+"://"+o+(t&&t.port===s.port?"":":"+s.port),s}const pa=typeof ArrayBuffer=="function",ma=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r.buffer instanceof ArrayBuffer,Ys=Object.prototype.toString,ba=typeof Blob=="function"||typeof Blob<"u"&&Ys.call(Blob)==="[object BlobConstructor]",ga=typeof File=="function"||typeof File<"u"&&Ys.call(File)==="[object FileConstructor]";function Bt(r){return pa&&(r instanceof ArrayBuffer||ma(r))||ba&&r instanceof Blob||ga&&r instanceof File}function je(r,e){if(!r||typeof r!="object")return!1;if(Array.isArray(r)){for(let t=0,s=r.length;t<s;t++)if(je(r[t]))return!0;return!1}if(Bt(r))return!0;if(r.toJSON&&typeof r.toJSON=="function"&&arguments.length===1)return je(r.toJSON(),!0);for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&je(r[t]))return!0;return!1}function ya(r){const e=[],t=r.data,s=r;return s.data=mt(t,e),s.attachments=e.length,{packet:s,buffers:e}}function mt(r,e){if(!r)return r;if(Bt(r)){const t={_placeholder:!0,num:e.length};return e.push(r),t}else if(Array.isArray(r)){const t=new Array(r.length);for(let s=0;s<r.length;s++)t[s]=mt(r[s],e);return t}else if(typeof r=="object"&&!(r instanceof Date)){const t={};for(const s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=mt(r[s],e));return t}return r}function va(r,e){return r.data=bt(r.data,e),delete r.attachments,r}function bt(r,e){if(!r)return r;if(r&&r._placeholder===!0){if(typeof r.num=="number"&&r.num>=0&&r.num<e.length)return e[r.num];throw new Error("illegal attachments")}else if(Array.isArray(r))for(let t=0;t<r.length;t++)r[t]=bt(r[t],e);else if(typeof r=="object")for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&(r[t]=bt(r[t],e));return r}const xa=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],wa=5;var K;(function(r){r[r.CONNECT=0]="CONNECT",r[r.DISCONNECT=1]="DISCONNECT",r[r.EVENT=2]="EVENT",r[r.ACK=3]="ACK",r[r.CONNECT_ERROR=4]="CONNECT_ERROR",r[r.BINARY_EVENT=5]="BINARY_EVENT",r[r.BINARY_ACK=6]="BINARY_ACK"})(K||(K={}));class $a{constructor(e){this.replacer=e}encode(e){return(e.type===K.EVENT||e.type===K.ACK)&&je(e)?this.encodeAsBinary({type:e.type===K.EVENT?K.BINARY_EVENT:K.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===K.BINARY_EVENT||e.type===K.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=ya(e),s=this.encodeAsString(t.packet),n=t.buffers;return n.unshift(s),n}}function Cr(r){return Object.prototype.toString.call(r)==="[object Object]"}class Dt extends U{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const s=t.type===K.BINARY_EVENT;s||t.type===K.BINARY_ACK?(t.type=s?K.EVENT:K.ACK,this.reconstructor=new Sa(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(Bt(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const s={type:Number(e.charAt(0))};if(K[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===K.BINARY_EVENT||s.type===K.BINARY_ACK){const o=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const i=e.substring(o,t);if(i!=Number(i)||e.charAt(t)!=="-")throw new Error("Illegal attachments");s.attachments=Number(i)}if(e.charAt(t+1)==="/"){const o=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););s.nsp=e.substring(o,t)}else s.nsp="/";const n=e.charAt(t+1);if(n!==""&&Number(n)==n){const o=t+1;for(;++t;){const i=e.charAt(t);if(i==null||Number(i)!=i){--t;break}if(t===e.length)break}s.id=Number(e.substring(o,t+1))}if(e.charAt(++t)){const o=this.tryParse(e.substr(t));if(Dt.isPayloadValid(s.type,o))s.data=o;else throw new Error("invalid payload")}return s}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case K.CONNECT:return Cr(t);case K.DISCONNECT:return t===void 0;case K.CONNECT_ERROR:return typeof t=="string"||Cr(t);case K.EVENT:case K.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&xa.indexOf(t[0])===-1);case K.ACK:case K.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Sa{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=va(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Ea=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Dt,Encoder:$a,get PacketType(){return K},protocol:wa},Symbol.toStringTag,{value:"Module"}));function re(r,e,t){return r.on(e,t),function(){r.off(e,t)}}const Ca=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Js extends U{constructor(e,t,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[re(e,"open",this.onopen.bind(this)),re(e,"packet",this.onpacket.bind(this)),re(e,"error",this.onerror.bind(this)),re(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){if(Ca.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const s={type:K.EVENT,data:t};if(s.options={},s.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const i=this.ids++,a=t.pop();this._registerAckCallback(i,a),s.id=i}const n=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!n||!this.connected)||(this.connected?(this.notifyOutgoingListeners(s),this.packet(s)):this.sendBuffer.push(s)),this.flags={},this}_registerAckCallback(e,t){var s;const n=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(n===void 0){this.acks[e]=t;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);t.call(this,new Error("operation has timed out"))},n),i=(...a)=>{this.io.clearTimeoutFn(o),t.apply(this,a)};i.withError=!0,this.acks[e]=i}emitWithAck(e,...t){return new Promise((s,n)=>{const o=(i,a)=>i?n(i):s(a);o.withError=!0,t.push(o),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((n,...o)=>s!==this._queue[0]?void 0:(n!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(n)):(this._queue.shift(),t&&t(null,...o)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:K.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(s=>String(s.id)===e)){const s=this.acks[e];delete this.acks[e],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case K.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case K.EVENT:case K.BINARY_EVENT:this.onevent(e);break;case K.ACK:case K.BINARY_ACK:this.onack(e);break;case K.DISCONNECT:this.ondisconnect();break;case K.CONNECT_ERROR:this.destroy();const s=new Error(e.data.message);s.data=e.data.data,this.emitReserved("connect_error",s);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const s of t)s.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let s=!1;return function(...n){s||(s=!0,t.packet({type:K.ACK,id:e,data:n}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:K.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const s of t)s.apply(this,e.data)}}}function Ee(r){r=r||{},this.ms=r.min||100,this.max=r.max||1e4,this.factor=r.factor||2,this.jitter=r.jitter>0&&r.jitter<=1?r.jitter:0,this.attempts=0}Ee.prototype.duration=function(){var r=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*r);r=Math.floor(e*10)&1?r+t:r-t}return Math.min(r,this.max)|0};Ee.prototype.reset=function(){this.attempts=0};Ee.prototype.setMin=function(r){this.ms=r};Ee.prototype.setMax=function(r){this.max=r};Ee.prototype.setJitter=function(r){this.jitter=r};class gt extends U{constructor(e,t){var s;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,Ye(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((s=t.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new Ee({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const n=t.parser||Ea;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new qs(this.uri,this.opts);const t=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const n=re(t,"open",function(){s.onopen(),e&&e()}),o=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},i=re(t,"error",o);if(this._timeout!==!1){const a=this._timeout,l=this.setTimeoutFn(()=>{n(),o(new Error("timeout")),t.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(n),this.subs.push(i),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(re(e,"ping",this.onping.bind(this)),re(e,"data",this.ondata.bind(this)),re(e,"error",this.onerror.bind(this)),re(e,"close",this.onclose.bind(this)),re(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){It(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let s=this.nsps[e];return s?this._autoConnect&&!s.active&&s.connect():(s=new Js(this,e,t),this.nsps[e]=s),s}_destroy(e){const t=Object.keys(this.nsps);for(const s of t)if(this.nsps[s].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let s=0;s<t.length;s++)this.engine.write(t[s],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(n=>{n?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",n)):e.onreconnect()}))},t);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Ne={};function Ue(r,e){typeof r=="object"&&(e=r,r=void 0),e=e||{};const t=ha(r,e.path||"/socket.io"),s=t.source,n=t.id,o=t.path,i=Ne[n]&&o in Ne[n].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||i;let l;return a?l=new gt(s,e):(Ne[n]||(Ne[n]=new gt(s,e)),l=Ne[n]),t.query&&!e.query&&(e.query=t.queryKey),l.socket(t.path,e)}Object.assign(Ue,{Manager:gt,Socket:Js,io:Ue,connect:Ue});var ka={BASE_URL:"/MendozApp/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Pa=ka.VITE_API_BASE_URL||"http://localhost:3000";class Na{constructor(){_t(this,"socket",null)}async connect(){const e=yn();if(!e)throw new Error("No token found");return this.socket=Ue(Pa,{auth:{token:e}}),new Promise((t,s)=>{this.socket?(this.socket.on("connect",()=>{t(this.socket)}),this.socket.on("connect_error",()=>{s(new Error("Connection error"))})):s(new Error("Socket initialization error"))})}disconnect(){var e;(e=this.socket)==null||e.disconnect(),this.socket=null}onUserConnected(e){var t;(t=this.socket)==null||t.on("user connected",e)}onOldChatMessages(e){var t;(t=this.socket)==null||t.on("old chat messages",e)}onRoomsGranted(e){var t;(t=this.socket)==null||t.on("rooms granted",e)}onNewRoomGranted(e){var t;(t=this.socket)==null||t.on("new room granted",e)}onDeleteRoom(e){var t;(t=this.socket)==null||t.emit("delete room",e)}onRoomDeleted(e){var t;(t=this.socket)==null||t.on("room deleted",e)}onChatMessage(e){var t;(t=this.socket)==null||t.on("chat message",e)}offChatMessage(e){var t;(t=this.socket)==null||t.off("chat message",e)}sendChatMessage(e){var t;(t=this.socket)==null||t.emit("chat message",e)}createNewRoom(e){var t;(t=this.socket)==null||t.emit("create room",e)}inviteUserToRoom(e,t){var s;(s=this.socket)==null||s.emit("invite user to room",e,t)}getUsersInRoom(e){var t;(t=this.socket)==null||t.emit("get users in room",e)}onGetUsersInRoom(e){var t;(t=this.socket)==null||t.on("users in room",e)}joinRoom(e){var t;(t=this.socket)==null||t.emit("join room",e)}onRoomJoined(e){var t;(t=this.socket)==null||t.on("room joined",e)}offRoomJoined(e){var t;(t=this.socket)==null||t.off("room joined",e)}}const W=new Na,Ta=({isOpen:r,onOpenChange:e,onDelete:t,roomToDelete:s})=>{const n=f.useRef(null);return f.useEffect(()=>{r&&n.current&&n.current.focus()},[r]),d.jsx(Rt,{isOpen:r,onOpenChange:e,placement:"top-center",children:d.jsx(Pt,{children:o=>d.jsxs(d.Fragment,{children:[d.jsx(Tt,{children:"Confirmar Eliminación"}),d.jsx(kt,{children:d.jsxs("p",{children:["¿Está seguro de que deseas eliminar la sala '",s,"'?"]})}),d.jsxs(Nt,{children:[d.jsx(pe,{color:"danger",variant:"flat",onPress:o,children:"Cancelar"}),d.jsx(pe,{color:"primary",onPress:t,ref:n,children:"Confirmar"})]})]})})})},Ra=Ta,Ka=({isOpen:r,onOpenChange:e,onDelete:t,roomToInvite:s,userToInvite:n,setUserToInvite:o})=>{const[i,a]=f.useState([]);return f.useEffect(()=>{W.getUsersInRoom(s)},[s]),f.useEffect(()=>{W.onGetUsersInRoom(a)},[s]),d.jsx(Rt,{isOpen:r,onOpenChange:e,placement:"top-center",children:d.jsx(Pt,{children:l=>d.jsxs(d.Fragment,{children:[d.jsxs(Tt,{children:["Añadir amigos a la sala ",s]}),d.jsxs(kt,{children:[d.jsx("p",{children:"Usuarios actuales:"}),i&&i.map(c=>d.jsx("p",{className:"text-blue-500 text-sm ml-2 mb-2",children:c},c)),d.jsx("input",{autoFocus:!0,type:"text",value:n,onChange:c=>o(c.target.value),placeholder:"Nombre de usuario",className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"})]}),d.jsxs(Nt,{children:[d.jsx(pe,{color:"danger",variant:"flat",onPress:l,children:"Cerrar"}),d.jsx(pe,{color:"primary",onPress:t,children:"Añadir"})]})]})})})},Aa=Ka;function Oa({username:r,rooms:e,actualRoom:t,roomsWithMessages:s,setRoomsWithMessages:n}){const{isOpen:o,onOpen:i,onClose:a}=nt(),{isOpen:l,onOpen:c,onClose:u}=nt(),{isOpen:m,onOpen:h,onClose:p}=nt(),[b,x]=f.useState(""),[w,S]=f.useState(""),[g,$]=f.useState(""),[C,T]=f.useState(""),P=E=>{x(E),c()},A=E=>{S(E),h()},O=()=>{g!==""&&(W.createNewRoom(g),$(""),a())},L=()=>{W.onDeleteRoom(b),x(""),u()},y=E=>{W.joinRoom(E),n(s.filter(N=>N.roomName!=E))},R=()=>{W.inviteUserToRoom(C,w),T(""),S(""),p()};return d.jsxs(d.Fragment,{children:[d.jsx("p",{className:"text-2xl font-bold p-3",children:"Salas"}),d.jsx(Ni,{"aria-label":"Rooms",children:e.map(E=>d.jsxs(Ri,{textValue:E.roomName,className:E.roomName==t?"bg-blue-400 text-white":"",endContent:d.jsxs("div",{className:"flex gap-3",children:[E.roomName!=t?d.jsx("button",{title:"Entrar",onClick:()=>y(E.roomName),children:d.jsx(vn,{className:"h-5 w-5 text-blue-500"})}):null,s.filter(N=>N.roomName==E.roomName).length>0?d.jsx("span",{className:"text-xs text-red-500 font-bold",children:s.filter(N=>N.roomName==E.roomName).length}):null,E.roomMaster==r?d.jsx(Pn,{className:E.roomName==t?" text-white":"text-blue-500 ",onClick:()=>A(E.roomName)}):null,E.roomMaster==r&&E.roomName!=t?d.jsx("button",{title:"Eliminar",onClick:()=>P(E.roomName),children:d.jsx(Bi,{className:"h-5 w-5 text-red-500"})}):null]}),children:[E.roomName," - ",d.jsx("span",{className:"text-xs",children:E.roomMaster})]},E.roomName))}),d.jsxs("div",{className:"flex justify-center mt-2 p-2",children:[d.jsxs("button",{onClick:i,className:"p-1 bg-blue-50 rounded-lg hover:bg-blue-100 flex flex-col items-center",children:[d.jsx(Li,{className:"h-6 w-6 md:h-8 md:w-8 text-black mb-1"}),d.jsx("span",{children:"Crear nueva sala"})]}),d.jsx(Rt,{isOpen:o,onOpenChange:a,placement:"top-center",children:d.jsx(Pt,{children:E=>d.jsxs(d.Fragment,{children:[d.jsx(Tt,{children:"Crear nueva sala"}),d.jsx(kt,{children:d.jsx(Nn,{autoFocus:!0,label:"Nombre",placeholder:"Nombre de la sala",variant:"bordered",value:g,onChange:N=>$(N.target.value),onKeyDown:N=>{N.key==="Enter"&&O()}})}),d.jsxs(Nt,{children:[d.jsx(pe,{color:"danger",variant:"flat",onPress:E,children:"Cerrar"}),d.jsx(pe,{color:"primary",onPress:O,children:"Crear"})]})]})})}),d.jsx(Ra,{isOpen:l,onOpenChange:u,onDelete:L,roomToDelete:b}),d.jsx(Aa,{isOpen:m,onOpenChange:p,onDelete:R,roomToInvite:w,userToInvite:C,setUserToInvite:T})]})]})}function Da(){const[r,e]=f.useState({type:"error",text:" "}),[t,s]=f.useState(""),[n,o]=f.useState([]),[i,a]=f.useState("General"),[l,c]=f.useState(""),[u,m]=f.useState([]),[h,p]=f.useState([{roomName:"",count:0}]),[b,x]=f.useState(!1),w=f.useRef(null);f.useEffect(()=>(document.title="Chat",(async()=>{try{e({type:"success",text:"● Conectado"}),await W.connect()}catch{e({type:"error",text:"● Error de conexión"})}})(),()=>{W.disconnect()}),[]),f.useEffect(()=>{W.onUserConnected(g=>{c(g.username)})},[]),f.useEffect(()=>{W.onOldChatMessages(g=>{o(g)})},[]),f.useEffect(()=>{W.onRoomsGranted(g=>{m(g)})},[]),f.useEffect(()=>{W.onNewRoomGranted(g=>{m($=>[...$,g])})},[]),f.useEffect(()=>{W.onRoomDeleted(g=>{m($=>$.filter(C=>C.roomName!==g))})},[]),f.useEffect(()=>{const g=($,C)=>{a($),o(C)};return W.onRoomJoined(g),()=>{W.offRoomJoined(g)}},[]),f.useEffect(()=>{const g=$=>{$.roomName===i?o(C=>[...C,$]):p(C=>[...C,{roomName:$.roomName,count:h[h.length-1].count+1}])};return W.onChatMessage(g),()=>{W.offChatMessage(g)}},[i,h]),f.useEffect(()=>{var g;(g=w.current)==null||g.scrollIntoView({behavior:"smooth"})},[n]);const S=g=>{g.preventDefault(),t.trim()&&(W.sendChatMessage(t),s(""))};return d.jsx(xn,{children:d.jsxs(wn,{children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("div",{className:"mt-1 text-lg",children:r!=null&&r.text&&r.type==="error"?d.jsx("p",{className:"text-red-500",children:r.text}):r!=null&&r.text&&r.type==="success"?d.jsx("p",{className:"text-green-500",children:r.text}):null}),d.jsxs(pe,{as:$n,to:"/",color:"danger",className:"mb-4 p-2",onClick:()=>{localStorage.removeItem("token")},children:["Desconectar",d.jsx(Ai,{width:25,height:25})]})]}),l?d.jsxs("div",{className:"flex-grow overflow-y-scroll border border-gray-300 p-2 rounded-lg shadow-inner",children:[d.jsx("p",{className:"text-center text-gray-500 border-b border-gray-300 p-2",children:i}),n.length===0?d.jsx("p",{className:"text-center text-gray-500 text-tiny p-2",children:"No hay mensajes"}):null,n.map((g,$)=>d.jsxs("div",{className:`flex mb-2 mt-2 ${l===g.username?"justify-end":"justify-start"}`,children:[d.jsxs("p",{className:`text-sm break-words whitespace-normal p-2 rounded-lg max-w-xs md:max-w-md ${l===g.username?"bg-green-200 text-gray-700 rounded-br-none":"bg-white text-gray-700 rounded-bl-none border"}`,children:[d.jsx("strong",{children:g.username}),": ",g.messageText]}),d.jsx("div",{ref:w})]},$))]}):d.jsx("p",{className:"text-center text-gray-500",children:"Cargando mensajes..."}),d.jsxs("form",{className:"flex gap-2 items-start",onSubmit:S,children:[d.jsx(ui,{minRows:1,className:"flex-grow mt-2",placeholder:"Mensaje",value:t,onChange:g=>s(g.target.value),onKeyDown:g=>g.key==="Enter"&&S(g)}),d.jsxs(pe,{type:"submit",className:"w-32 self-end p-2 text-white bg-green-400 rounded-lg hover:bg-green-600",isLoading:(r==null?void 0:r.type)==="error",children:["Enviar ",d.jsx(Oi,{width:25,height:25})]})]}),d.jsxs("div",{className:`fixed top-0 right-0 h-full ${b?"w-1/2 md:w-1/6":"w-0"} p-1 md:p-1 bg-white shadow-lg transition-all duration-300  `,children:[d.jsx("button",{onClick:()=>x(!b),className:"absolute left-[-13px] md:left-[-28px] top-1/2 transform -translate-y-1/2 w-7 h-7 md:w-10 md:h-10 flex items-center justify-center  rounded-full bg-blue-500 hover:bg-blue-600",children:b?d.jsx(Ii,{className:"h-4 w-4 md:h-6 md:w-6 text-white"}):d.jsx(Ki,{className:"h-4 w-4 md:h-6 md:w-6 text-white"})}),d.jsx("div",{className:"overflow-y-scroll h-full",children:d.jsx(Oa,{rooms:u,actualRoom:i,username:l,roomsWithMessages:h,setRoomsWithMessages:p})})]})]})})}export{Da as default};
