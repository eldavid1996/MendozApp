import{u as E,r as i,j as e,C,F as h,b as N,s as S}from"./index--7Of_JPl.js";import{u as M,i as r,E as F,P,a as R,b as k,l as D}from"./auth-SyJEHdke.js";import{i as f,U as L}from"./UserIcon-Cr8iRVyo.js";function _(){const v=E();i.useEffect(()=>{document.title="Inicio de sesión"},[]);const[s,m]=i.useState({email:"",password:""}),[a,u]=i.useState({type:"success",text:""}),[c,y]=i.useState(!1),[x,p]=i.useState(!1),j=()=>{y(!c)},b=i.useCallback(d=>{const{name:t,value:l}=d.target;m(I=>({...I,[t]:l}))},[]),{isEmailInvalid:n,isPasswordInvalid:o}=M(s),g=!s.email||!s.password||r(s.email)||r(s.password)||n||o||x,w=async d=>{d.preventDefault(),p(!0);try{const t=await D(s);u({type:"success",text:"Sesión iniciada con éxito"}),m({email:"",password:""}),S(t.token,1),v("/chat")}catch(t){let l="Error desconocido";t instanceof Error&&(l=t.message),u({type:"error",text:l})}finally{p(!1)}};return e.jsx(C,{children:e.jsxs("form",{onSubmit:w,children:[e.jsx(h,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{width:33,height:33,className:"max-sm:mb-10 md:mb-5"}),e.jsx(f,{id:"email",name:"email",variant:"bordered",type:"email",label:"Correo Electrónico",description:"No se mostrará tu correo electrónico en tu perfil",isRequired:!0,value:s.email,onChange:b,isInvalid:n||r(s.email),errorMessage:n?"Ingresa un email válido":r(s.email)?"Máximo 255 caracteres":"",color:n===void 0?void 0:n?"danger":"success"})]})}),e.jsx(h,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{width:33,height:33,className:"max-sm:mb-14 md:mb-10"}),e.jsx(f,{name:"password",variant:"bordered",isRequired:!0,type:c?"text":"password",label:"Contraseña",description:"Mínimo 8 caracteres, una mayúscula, una minúscula, un número y un caracter especial",value:s.password,onChange:b,endContent:e.jsx("button",{tabIndex:-1,type:"button",onClick:j,"aria-label":"toggle password visibility",children:c?e.jsx(R,{className:"text-2xl text-default-400 pointer-events-none mb-2"}):e.jsx(k,{className:"text-2xl text-default-400 pointer-events-none mb-2"})}),isInvalid:r(s.password)||o,errorMessage:o?"Mínimo 8 caracteres, una mayúscula, una minúscula, un número y un caracter especial":r(s.password)?"Máximo 255 caracteres":"",color:o===void 0?void 0:o?"danger":"success"})," "]})}),a!=null&&a.text&&a.type==="error"?e.jsx("p",{className:"text-red-500",children:a.text}):a!=null&&a.text&&a.type==="success"?e.jsx("p",{className:"text-green-500",children:a.text}):null,e.jsx("div",{className:"flex justify-end mt-5",children:e.jsx(N,{type:"submit","aria-label":"Register",color:g?"default":"success",disabled:g,isLoading:x,endContent:e.jsx(L,{}),children:"Iniciar Sesión"})})]})})}export{_ as default};
